/*!
 * Copyright (C) 2007-2015 eBay Inc. All Rights Reserved.
 */
var LegalPane = {
    _CHECKBOX_PROPERTY_NAMES: [
        "PROP_EVENT_ANALYTICS_OPTOUT"
    ],
    _activeAccount: null,
    _homeSite: null,
    get activeAccount() {
        if (!this._activeAccount) {
            this._activeAccount = Account.getAccount();
        }
        return this._activeAccount;
    },
    get homeSite() {
        var homeSite = null;
        if (!this._homeSite) {
            homeSite = UtilityHelper.getURLParameter(location.href, PropertyDAO.PROP_HOME_SITE);
            if (homeSite !== null && homeSite != "null") {
                this._homeSite = homeSite;
            }
        }
        return this._homeSite;
    },
    set homeSite(aValue) {
        this._homeSite = aValue;
    },
    init: function () {
        var that = this;
        var licencePath;
        $("[rel^=i18n]").i18n();
        if (Configs.BROWSER === "sf") {
            licencePath = "../.." + $.i18n.getString("options.legal.licencePath");
        }
        else {
            licencePath = $.i18n.getString("options.legal.licencePath");
        }
        $("#legal-licence-frame").attr("src", licencePath);
        $("#legal-licence-frame-container").mCustomScrollbar({
            axis: "yx",
            theme: "minimal-dark",
            scrollInertia: 70
        });
        this._populateProperties();
        this._addEventListeners();
        new Timer(function () { that._initLinkLabels(); }, 100);
    },
    _initLinkLabels: function () {
        var goToTermsSection;
        var goToPrivacySection;
        var goToCookiesSection;
        if (Configs.BROWSER === "sf") {
            goToTermsSection = function (aEvent) {
                url = RoverUrlHelper.getUrl({
                    srcAreaName: "preferences", templateName: "termsPage", homeSite: this.homeSite, activeAccount: this.activeAccount
                });
                window.open(url);
            }.bind(this);
            goToPrivacySection = function (aEvent) {
                url = RoverUrlHelper.getUrl({
                    srcAreaName: "preferences", templateName: "privacyPage", homeSite: this.homeSite, activeAccount: this.activeAccount
                });
                window.open(url);
            }.bind(this);
            goToCookiesSection = function (aEvent) {
                url = RoverUrlHelper.getUrl({
                    srcAreaName: "preferences", templateName: "cookiesPage", homeSite: this.homeSite, activeAccount: this.activeAccount
                });
                window.open(url);
            }.bind(this);
        }
        else {
            goToTermsSection = function (aEvent) {
                RoverUrlHelper.loadPage("termsPage", "preferences", { forceNewTab: true, }, aEvent);
            };
            goToPrivacySection = function (aEvent) {
                RoverUrlHelper.loadPage("privacyPage", "preferences", { forceNewTab: true, }, aEvent);
            };
            goToCookiesSection = function (aEvent) {
                RoverUrlHelper.loadPage("cookiesPage", "preferences", { forceNewTab: true, }, aEvent);
            };
        }
        UtilityHelper.explodeLabelWithLinks($("#legal-licence-info-label"), [goToTermsSection, goToPrivacySection, goToCookiesSection]);
    },
    _populateProperties: function () {
        $.each(this._CHECKBOX_PROPERTY_NAMES, function () {
            $("input[ebayproperty=" + this + "]").prop("checked", PropertyDAO.get(PropertyDAO[this]));
        });
    },
    setProperty: function (aElement) {
        var element = $(aElement);
        var propName = PropertyDAO[$(aElement).attr("ebayproperty")];
        var propValue = element.prop("checked");
        PropertyDAO.set(propName, propValue);
    },
    _addEventListeners: function () {
        $(".legal-pane-content .content-section input:checkbox").click(function () {
            LegalPane.setProperty(this);
        });
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3B0aW9uc0xlZ2FsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vdWkvdmlldy9jb3JlL29wdGlvbnNMZWdhbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7R0FFRztBQUtILElBQUksU0FBUyxHQUFHO0lBQ2Qsd0JBQXdCLEVBQUc7UUFDekIsNkJBQTZCO0tBQzlCO0lBQ0QsY0FBYyxFQUFHLElBQUk7SUFDckIsU0FBUyxFQUFHLElBQUk7SUFFaEIsSUFBSSxhQUFhO1FBQ2YsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztZQUN6QixJQUFJLENBQUMsY0FBYyxHQUFHLE9BQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUM3QyxDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUM7SUFDN0IsQ0FBQztJQUVELElBQUksUUFBUTtRQUNWLElBQUksUUFBUSxHQUFHLElBQUksQ0FBQztRQUNwQixFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3BCLFFBQVEsR0FBRyxhQUFhLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsV0FBVyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ3BGLEVBQUUsQ0FBQyxDQUFDLFFBQVEsS0FBSyxJQUFJLElBQUksUUFBUSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQzVDLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO1lBQzVCLENBQUM7UUFDSCxDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDeEIsQ0FBQztJQUVELElBQUksUUFBUSxDQUFDLE1BQU07UUFDakIsSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksRUFBRztRQUVMLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUNoQixJ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LEtBQUssQ0FBQztZQUM3RCxTQUFTLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztDQUNGLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoQykgMjAwNy0yMDE1IGVCYXkgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICovXG5cbi8qKlxuICogTGVnYWwgUGFuZSBDbGFzcy5cbiAqL1xudmFyIExlZ2FsUGFuZSA9IHtcbiAgX0NIRUNLQk9YX1BST1BFUlRZX05BTUVTIDogW1xuICAgIFwiUFJPUF9FVkVOVF9BTkFMWVRJQ1NfT1BUT1VUXCJcbiAgXSxcbiAgX2FjdGl2ZUFjY291bnQgOiBudWxsLFxuICBfaG9tZVNpdGUgOiBudWxsLFxuXG4gIGdldCBhY3RpdmVBY2NvdW50KCkge1xuICAgIGlmICghdGhpcy5fYWN0aXZlQWNjb3VudCkge1xuICAgICAgdGhpcy5fYWN0aXZlQWNjb3VudCA9IEFjY291bnQuZ2V0QWNjb3VudCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9hY3RpdmVBY2NvdW50O1xuICB9LFxuXG4gIGdldCBob21lU2l0ZSgpIHtcbiAgICB2YXIgaG9tZVNpdGUgPSBudWxsO1xuICAgIGlmICghdGhpcy5faG9tZVNpdGUpIHtcbiAgICAgIGhvbWVTaXRlID0gVXRpbGl0eUhlbHBlci5nZXRVUkxQYXJhbWV0ZXIobG9jYXRpb24uaHJlZiwgUHJvcGVydHlEQU8uUFJPUF9IT01FX1NJVEUpO1xuICAgICAgaWYgKGhvbWVTaXRlICE9PSBudWxsICYmIGhvbWVTaXRlICE9IFwibnVsbFwiKSB7XG4gICAgICAgIHRoaXMuX2hvbWVTaXRlID0gaG9tZVNpdGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2hvbWVTaXRlO1xuICB9LFxuXG4gIHNldCBob21lU2l0ZShhVmFsdWUpIHtcbiAgICB0aGlzLl9ob21lU2l0ZSA9IGFWYWx1ZTtcbiAgfSxcblxuICBpbml0IDogZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdmFyIGxpY2VuY2VQYXRoO1xuXG4gICAgLy8gc2V0IHRoZSBsb2NhbGUgYW5kIGFwcGx5IHRoZW0gdG8gdGhlIHJlbGV2YW50IG5vZGVzLlxuICAgICQoXCJbcmVsXj1pMThuXVwiKS5pMThuKCk7XG4gICAgLy8gc2V0IHRoZSBsaWNlbmNlIHBhdGguXG4gICAgaWYgKENvbmZpZ3MuQlJPV1NFUiA9PT0gXCJzZlwiKSB7XG4gICAgICBsaWNlbmNlUGF0aCA9IFwiLi4vLi5cIiArICQuaTE4bi5nZXRTdHJpbmcoXCJvcHRpb25zLmxlZ2FsLmxpY2VuY2VQYXRoXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaWNlbmNlUGF0aCA9ICQuaTE4bi5nZXRTdHJpbmcoXCJvcHRpb25zLmxlZ2FsLmxpY2VuY2VQYXRoXCIpO1xuICAgIH1cbiAgICAkKFwiI2xlZ2FsLWxpY2VuY2UtZnJhbWVcIikuYXR0cihcInNyY1wiLCBsaWNlbmNlUGF0aCk7XG5cbiAgICAkKFwiI2xlZ2FsLWxpY2VuY2UtZnJhbWUtY29udGFpbmVyXCIpLm1DdXN0b21TY3JvbGxiYXIoe1xuICAgICAgYXhpczogXCJ5eFwiLFxuICAgICAgdGhlbWU6IFwibWluaW1hbC1kYXJrXCIsXG4gICAgICBzY3JvbGxJbmVydGlhOiA3MFxuICAgIH0pO1xuICAgIHRoaXMuX3BvcHVsYXRlUHJvcGVydGllcygpO1xuICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgLy8gZ2l2ZSBlbm91Z2ggdGltZSBmb3IgdHJhbnNsYXRlZCB0ZXh0cyB0byBiZSBhcHBlbmRlZCB0byB0aGUgZG9tIGJlZm9yZVxuICAgIC8vIHNldHRpbmcgdGhlIGxpbmtzLlxuICAgIG5ldyBUaW1lcihmdW5jdGlvbigpIHsgdGhhdC5faW5pdExpbmtMYWJlbHMoKTsgfSwgMTAwKTtcbiAgfSxcblxuICBfaW5pdExpbmtMYWJlbHMgOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZ29Ub1Rlcm1zU2VjdGlvbjtcbiAgICB2YXIgZ29Ub1ByaXZhY3lTZWN0aW9uO1xuICAgIHZhciBnb1RvQ29va2llc1NlY3Rpb247XG5cbiAgICBpZiAoQ29uZmlncy5CUk9XU0VSID09PSBcInNmXCIpIHtcbiAgICAgIGdvVG9UZXJtc1NlY3Rpb24gPSBmdW5jdGlvbihhRXZlbnQpIHtcbiAgICAgICAgdXJsID0gUm92ZXJVcmxIZWxwZXIuZ2V0VXJsKHtcbiAgICAgICAgICBzcmNBcmVhTmFtZTogXCJwcmVmZXJlbmNlc1wiLCB0ZW1wbGF0ZU5hbWU6IFwidGVybXNQYWdlXCIsIGhvbWVTaXRlOiB0aGlzLmhvbWVTaXRlLCBhY3RpdmVBY2NvdW50OiB0aGlzLmFjdGl2ZUFjY291bnQgfSk7XG4gICAgICAgIHdpbmRvdy5vcGVuKHVybCk7XG4gICAgICB9LmJpbmQodGhpcyk7XG4gICAgICBnb1RvUHJpdmFjeVNlY3Rpb24gPSBmdW5jdGlvbihhRXZlbnQpIHtcbiAgICAgICAgdXJsID0gUm92ZXJVcmxIZWxwZXIuZ2V0VXJsKHtcbiAgICAgICAgICBzcmNBcmVhTmFtZTogXCJwcmVmZXJlbmNlc1wiLCB0ZW1wbGF0ZU5hbWU6IFwicHJpdmFjeVBhZ2VcIiwgaG9tZVNpdGU6IHRoaXMuaG9tZVNpdGUsIGFjdGl2ZUFjY291bnQ6IHRoaXMuYWN0aXZlQWNjb3VudCB9KTtcbiAgICAgICAgd2luZG93Lm9wZW4odXJsKTtcbiAgICAgIH0uYmluZCh0aGlzKTtcbiAgICAgIGdvVG9Db29raWVzU2VjdGlvbiA9IGZ1bmN0aW9uKGFFdmVudCkge1xuICAgICAgICB1cmwgPSBSb3ZlclVybEhlbHBlci5nZXRVcmwoe1xuICAgICAgICAgIHNyY0FyZWFOYW1lOiBcInByZWZlcmVuY2VzXCIsIHRlbXBsYXRlTmFtZTogXCJjb29raWVzUGFnZVwiLCBob21lU2l0ZTogdGhpcy5ob21lU2l0ZSwgYWN0aXZlQWNjb3VudDogdGhpcy5hY3RpdmVBY2NvdW50IH0pO1xuICAgICAgICB3aW5kb3cub3Blbih1cmwpO1xuICAgICAgfS5iaW5kKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnb1RvVGVybXNTZWN0aW9uID0gZnVuY3Rpb24gKGFFdmVudCkge1xuICAgICAgICBSb3ZlclVybEhlbHBlci5sb2FkUGFnZShcInRlcm1zUGFnZVwiLCBcInByZWZlcmVuY2VzXCIsXG4gICAgICAgICAge2ZvcmNlTmV3VGFiOiB0cnVlLH0sXG4gICAgICAgICAgYUV2ZW50KTtcbiAgICAgIH07XG4gICAgICBnb1RvUHJpdmFjeVNlY3Rpb24gPSBmdW5jdGlvbiAoYUV2ZW50KSB7XG4gICAgICAgIFJvdmVyVXJsSGVscGVyLmxvYWRQYWdlKFwicHJpdmFjeVBhZ2VcIiwgXCJwcmVmZXJlbmNlc1wiLFxuICAgICAgICAgIHtmb3JjZU5ld1RhYjogdHJ1ZSx9LFxuICAgICAgICAgIGFFdmVudCk7XG4gICAgICB9O1xuICAgICAgZ29Ub0Nvb2tpZXNTZWN0aW9uID0gZnVuY3Rpb24gKGFFdmVudCkge1xuICAgICAgICBSb3ZlclVybEhlbHBlci5sb2FkUGFnZShcImNvb2tpZXNQYWdlXCIsIFwicHJlZmVyZW5jZXNcIixcbiAgICAgICAgICB7Zm9yY2VOZXdUYWI6IHRydWUsfSxcbiAgICAgICAgICBhRXZlbnQpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBVdGlsaXR5SGVscGVyLmV4cGxvZGVMYWJlbFdpdGhMaW5rcyhcbiAgICAgICQoXCIjbGVnYWwtbGljZW5jZS1pbmZvLWxhYmVsXCIpLCBbIGdvVG9UZXJtc1NlY3Rpb24sIGdvVG9Qcml2YWN5U2VjdGlvbiwgZ29Ub0Nvb2tpZXNTZWN0aW9uIF0pO1xuICB9LFxuXG4gIF9wb3B1bGF0ZVByb3BlcnRpZXMgOiBmdW5jdGlvbigpIHtcblxuICAgICQuZWFjaCh0aGlzLl9DSEVDS0JPWF9QUk9QRVJUWV9OQU1FUywgZnVuY3Rpb24oKSB7XG4gICAgICAkKFwiaW5wdXRbZWJheXByb3BlcnR5PVwiICsgdGhpcyArIFwiXVwiKS5wcm9wKFxuICAgICAgICBcImNoZWNrZWRcIiwgUHJvcGVydHlEQU8uZ2V0KFByb3BlcnR5REFPW3RoaXNdKSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgc2V0UHJvcGVydHkgOiBmdW5jdGlvbihhRWxlbWVudCkge1xuXG4gICAgdmFyIGVsZW1lbnQgPSAkKGFFbGVtZW50KTtcbiAgICB2YXIgcHJvcE5hbWUgPSBQcm9wZXJ0eURBT1skKGFFbGVtZW50KS5hdHRyKFwiZWJheXByb3BlcnR5XCIpXTtcbiAgICB2YXIgcHJvcFZhbHVlID0gZWxlbWVudC5wcm9wKFwiY2hlY2tlZFwiKTtcblxuICAgIFByb3BlcnR5REFPLnNldChwcm9wTmFtZSwgcHJvcFZhbHVlKTtcbiAgfSxcblxuICBfYWRkRXZlbnRMaXN0ZW5lcnMgOiBmdW5jdGlvbigpIHtcbiAgICAkKFwiLmxlZ2FsLXBhbmUtY29udGVudCAuY29udGVudC1zZWN0aW9uIGlucHV0OmNoZWNrYm94XCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgTGVnYWxQYW5lLnNldFByb3BlcnR5KHRoaXMpO1xuICAgIH0pO1xuICB9XG59O1xuIl19