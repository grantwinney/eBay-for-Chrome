/*!
 * Copyright (C) 2007-2015 eBay Inc. All Rights Reserved.
 */
var AutoCompleteApi = {
    getData: function (aKeyword, aSiteId, aCallback) {
        var that = this;
        var request;
        var localCallback = function (aResponse) {
            if (aCallback) {
                response = that._parseGetData(aResponse);
                aCallback(response);
            }
        };
        request = this._doCall(aKeyword, aSiteId, localCallback);
        return request;
    },
    _parseGetData: function (aResponse) {
        var response = {};
        if (aResponse && "prefix" in aResponse) {
            response.keyword = aResponse.prefix;
            if ("res" in aResponse) {
                response.suggestions = aResponse.res.sug;
                response.categories = aResponse.res.categories;
            }
        }
        return response;
    },
    _processResponse: function (aData) {
        var response;
        var result;
        if (aData && aData.match(/^\/\*\*\/\((.*)\)$/)) {
            result = aData.match(/^\/\*\*\/\((.*)\)$/);
            if (result && result.length > 1) {
                response = JSON.parse(result[1]);
            }
        }
        return response;
    },
    _validateResponse: function (aResponse) {
        if (!aResponse) {
            Logger.error("AutoComplete API error (no response document!)");
            return false;
        }
        var node = $(aResponse).find("prefix");
        if (!node) {
            Logger.error("AutoComplete API error (no Prefix node!)");
            return false;
        }
        return true;
    },
    _doCall: function (aKeyword, aSiteId, aCallback) {
        var that = this;
        var parameterString;
        var request;
        var requestName = "GetAutoComplete";
        parameterString = "kwd=" + aKeyword;
        parameterString += "&sId=" + aSiteId;
        parameterString += "&_cb=\"\"";
        request =
            $.ajax({
                contentType: "application/json",
                url: ApiHelper.getEndPoint("autoCompleteApi"),
                data: parameterString,
                dataType: "text",
                jsonp: false,
                timeout: PropertyDAO.get(PropertyDAO.PROP_API_TIMEOUT),
                success: function (aData, aTextStatus) {
                    try {
                        if (aTextStatus && aTextStatus == "success") {
                            var data = that._processResponse(aData);
                            if (!that._validateResponse(data)) {
                                data = null;
                            }
                            else {
                                MessagePanelService.dismissMessage(MessagePanelService.TYPE.CONNECT_ERROR);
                            }
                            if (aCallback) {
                                aCallback(data);
                            }
                        }
                    }
                    catch (e) {
                        UtilityHelper.handleError("AutoCompleteApi", requestName, e.message, aCallback);
                    }
                },
                error: function (aXHR, aTextStatus, aError) {
                    UtilityHelper.handleError("AutoCompleteApi", requestName, aXHR.responseText, aCallback);
                }
            });
        ApiHelper.addPendingRequest(request, requestName);
        return request;
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0b0NvbXBsZXRlQXBpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vYmFja2dyb3VuZC9jb3JlL2FwaXMvYXV0b0NvbXBsZXRlQXBpLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztHQUVHO0FBYUgsSUFBSSxlQUFlLEdBQUc7SUFTcEIsT0FBTyxFQUFHLFVBQVMsUUFBUSxFQUFFLE9BQU8sRUFBRSxTQUFTO1FBRTdDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUNoQixJQUFJLE9BQU8sQ0FBQztRQUVaLElBQUksYUFBYSxHQUFHLFVBQVMsU0FBUztZQUNwQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO2dCQUNkLFFBQVEsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2dCQUN6QyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDdEIsQ0FBQztRQUNILENBQUMsQ0FBQztRQUVGLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxPQUFPLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFFekQsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUNqQixDQUFDO0lBT0QsYUFBYSxFQUFHLFVBQVMsU0FBUztRQUVoQyxJQUFJLFFBQVEsR0FBRyxFQUFFLENBQUM7UUFDbEIsRUFBRSxDQUFDLENBQUMsU0FBUyxJQUFJLFFBQVEsSUFBSSxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3ZDLFFBQVEsQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQztZQUNwQyxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQztnQkFDdkIsUUFBUSxDQUFDLFdBQVcsR0FBRyxTQUFTLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQztnQkFDekMsUUFBUSxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQztZQUNqRCxDQUFD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LENBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUNWLGFBQWEsQ0FBQyxXQUFXLENBQUMsaUJBQWlCLEVBQUUsV0FBVyxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLENBQUM7b0JBQ2xGLENBQUM7Z0JBQ0gsQ0FBQztnQkFDRCxLQUFLLEVBQUUsVUFBUyxJQUFJLEVBQUUsV0FBVyxFQUFFLE1BQU07b0JBQ3ZDLGFBQWEsQ0FBQyxXQUFXLENBQUMsaUJBQWlCLEVBQUUsV0FBVyxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUUsU0FBUyxDQUFDLENBQUM7Z0JBQzFGLENBQUM7YUFDRixDQUFDLENBQUM7UUFLTCxTQUFTLENBQUMsaUJBQWlCLENBQUMsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBRWxELE1BQU0sQ0FBQyxPQUFPLENBQUM7SUFDakIsQ0FBQztDQUNGLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoQykgMjAwNy0yMDE1IGVCYXkgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICovXG5cbi8qXG4gIHZhciBMb2dnZXIgPSByZXF1aXJlKFwiaGVscGVycy9sb2dnZXJcIikuTG9nZ2VyO1xuICB2YXIgVXRpbGl0eUhlbHBlciA9IHJlcXVpcmUoXCJoZWxwZXJzL3V0aWxpdHlIZWxwZXJcIikuVXRpbGl0eUhlbHBlcjtcbiAgdmFyIEFwaUhlbHBlciA9IHJlcXVpcmUoXCJjb3JlL2hlbHBlcnMvYXBpSGVscGVyXCIpLkFwaUhlbHBlcjtcbiAgdmFyIE1lc3NhZ2VQYW5lbFNlcnZpY2UgPSByZXF1aXJlKFwiY29yZS9zZXJ2aWNlcy9tZXNzYWdlUGFuZWxTZXJ2aWNlXCIpLk1lc3NhZ2VQYW5lbFNlcnZpY2U7XG4gIHZhciBQcm9wZXJ0eURBTyA9IHJlcXVpcmUoXCJzdG9yYWdlL3Byb3BlcnR5REFPXCIpLlByb3BlcnR5REFPO1xuKi9cblxuLyoqXG4gKiBUaGUgQXV0byBDb21wbGV0ZSBBUEkuXG4gKi9cbnZhciBBdXRvQ29tcGxldGVBcGkgPSB7XG5cbiAgLyoqXG4gICAqIEdldHMgYWRkcmVzc2VzXG4gICAqIEBwYXJhbSBhU2l0ZUlkIHRoZSBzaXRlIHRvIGJlIHVzZWQgaW4gdGhlIHJlcXVlc3RcbiAgICogQHBhcmFtIGFLZXl3b3JkIHRoZSBrZXl3b3JkXG4gICAqIEBwYXJhbSBhQ2FsbGJhY2suXG4gICAqIEByZXR1cm4gcmVxdWVzdCBvYmplY3QuXG4gICAqL1xuICBnZXREYXRhIDogZnVuY3Rpb24oYUtleXdvcmQsIGFTaXRlSWQsIGFDYWxsYmFjaykge1xuICAgIFxuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB2YXIgcmVxdWVzdDtcblxuICAgIHZhciBsb2NhbENhbGxiYWNrID0gZnVuY3Rpb24oYVJlc3BvbnNlKSB7XG4gICAgICBpZiAoYUNhbGxiYWNrKSB7XG4gICAgICAgIHJlc3BvbnNlID0gdGhhdC5fcGFyc2VHZXREYXRhKGFSZXNwb25zZSk7XG4gICAgICAgIGFDYWxsYmFjayhyZXNwb25zZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJlcXVlc3QgPSB0aGlzLl9kb0NhbGwoYUtleXdvcmQsIGFTaXRlSWQsIGxvY2FsQ2FsbGJhY2spO1xuXG4gICAgcmV0dXJuIHJlcXVlc3Q7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEV4dHJhY3RzIHRoZSByZXNwb25zZS5cbiAgICogQHBhcmFtIGFSZXNwb25zZSB0aGUganNvbi5cbiAgICogQHJldHVybiB0aGUgcmVzdWx0LlxuICAgKi9cbiAgX3BhcnNlR2V0RGF0YSA6IGZ1bmN0aW9uKGFSZXNwb25zZSkge1xuICAgIFxuICAgIHZhciByZXNwb25zZSA9IHt9O1xuICAgIGlmIChhUmVzcG9uc2UgJiYgXCJwcmVmaXhcIiBpbiBhUmVzcG9uc2UpIHtcbiAgICAgIHJlc3BvbnNlLmtleXdvcmQgPSBhUmVzcG9uc2UucHJlZml4O1xuICAgICAgaWYgKFwicmVzXCIgaW4gYVJlc3BvbnNlKSB7XG4gICAgICAgIHJlc3BvbnNlLnN1Z2dlc3Rpb25zID0gYVJlc3BvbnNlLnJlcy5zdWc7XG4gICAgICAgIHJlc3BvbnNlLmNhdGVnb3JpZXMgPSBhUmVzcG9uc2UucmVzLmNhdGVnb3JpZXM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQcm9jZXNzZXMgdGhlIHJlc3BvbnNlLlxuICAgKiBAcGFyYW0gYURhdGEgdGhlIGRhdGEuXG4gICAqIEByZXR1cm4gdGhlIHByb2Nlc3NlZCByZXNwb25zZS5cbiAgICovXG4gIF9wcm9jZXNzUmVzcG9uc2UgOiBmdW5jdGlvbihhRGF0YSkge1xuICAgIFxuICAgIHZhciByZXNwb25zZTtcbiAgICB2YXIgcmVzdWx0O1xuICAgIGlmIChhRGF0YSAmJiBhRGF0YS5tYXRjaCgvXlxcL1xcKlxcKlxcL1xcKCguKilcXCkkLykpIHtcbiAgICAgIHJlc3VsdCA9IGFEYXRhLm1hdGNoKC9eXFwvXFwqXFwqXFwvXFwoKC4qKVxcKSQvKTtcblxuICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQubGVuZ3RoID4gMSkge1xuICAgICAgICByZXNwb25zZSA9IEpTT04ucGFyc2UocmVzdWx0WzFdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlcG9ydHMgYW55IGVycm9yIG1lc3NhZ2VzIGluIHRoZSBBUEkgcmVzcG9uc2UuXG4gICAqIEBwYXJhbSBhUmVzcG9uc2UgdGhlIEFQSSByZXNwb25zZS5cbiAgICogQHJldHVybiBib29sZWFuIGluZGljYXRlcyB3aGV0aGVyIHRoZSByZXNwb25zZSBoYXMgZXJyb3Igb3Igbm90LlxuICAgKi9cbiAgX3ZhbGlkYXRlUmVzcG9uc2UgOiBmdW5jdGlvbihhUmVzcG9uc2UpIHtcbiAgICBcbiAgICBpZiAoIWFSZXNwb25zZSkge1xuICAgICAgTG9nZ2VyLmVycm9yKFwiQXV0b0NvbXBsZXRlIEFQSSBlcnJvciAobm8gcmVzcG9uc2UgZG9jdW1lbnQhKVwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgbm9kZSA9ICQoYVJlc3BvbnNlKS5maW5kKFwicHJlZml4XCIpO1xuICAgIGlmICghbm9kZSkge1xuICAgICAgTG9nZ2VyLmVycm9yKFwiQXV0b0NvbXBsZXRlIEFQSSBlcnJvciAobm8gUHJlZml4IG5vZGUhKVwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcblxuICAvKipcbiAgICogU2VuZHMgYSByZXF1ZXN0LlxuICAgKiBAcGFyYW0gYUtleXdvcmQgVGhlIGtleWJvYXJkXG4gICAqIEBwYXJhbSBhU2l0ZUlkIFRoZSBzaXRlIGlkXG4gICAqIEBwYXJhbSBhQ2FsbGJhY2sgVGhlIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAqIEByZXR1cm5zIHJlcXVlc3Qgb2JqZWN0XG4gICAqL1xuICBfZG9DYWxsIDogZnVuY3Rpb24oYUtleXdvcmQsIGFTaXRlSWQsIGFDYWxsYmFjaykge1xuICAgIFxuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB2YXIgcGFyYW1ldGVyU3RyaW5nO1xuICAgIHZhciByZXF1ZXN0O1xuICAgIHZhciByZXF1ZXN0TmFtZSA9IFwiR2V0QXV0b0NvbXBsZXRlXCI7XG5cbiAgICBwYXJhbWV0ZXJTdHJpbmcgPSBcImt3ZD1cIiArIGFLZXl3b3JkO1xuICAgIHBhcmFtZXRlclN0cmluZyArPSBcIiZzSWQ9XCIgKyBhU2l0ZUlkO1xuICAgIHBhcmFtZXRlclN0cmluZyArPSBcIiZfY2I9XFxcIlxcXCJcIjtcblxuICAgIHJlcXVlc3QgPVxuICAgICAgJC5hamF4KHtcbiAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB1cmw6IEFwaUhlbHBlci5nZXRFbmRQb2ludChcImF1dG9Db21wbGV0ZUFwaVwiKSxcbiAgICAgICAgZGF0YTogcGFyYW1ldGVyU3RyaW5nLFxuICAgICAgICBkYXRhVHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgIGpzb25wOiBmYWxzZSxcbiAgICAgICAgdGltZW91dDogUHJvcGVydHlEQU8uZ2V0KFByb3BlcnR5REFPLlBST1BfQVBJX1RJTUVPVVQpLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihhRGF0YSwgYVRleHRTdGF0dXMpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGFUZXh0U3RhdHVzICYmIGFUZXh0U3RhdHVzID09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICAgIHZhciBkYXRhID0gdGhhdC5fcHJvY2Vzc1Jlc3BvbnNlKGFEYXRhKTtcbiAgICAgICAgICAgICAgaWYgKCF0aGF0Ll92YWxpZGF0ZVJlc3BvbnNlKGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IG51bGw7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgTWVzc2FnZVBhbmVsU2VydmljZS5kaXNtaXNzTWVzc2FnZShNZXNzYWdlUGFuZWxTZXJ2aWNlLlRZUEUuQ09OTkVDVF9FUlJPUik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGFDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGFDYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgVXRpbGl0eUhlbHBlci5oYW5kbGVFcnJvcihcIkF1dG9Db21wbGV0ZUFwaVwiLCByZXF1ZXN0TmFtZSwgZS5tZXNzYWdlLCBhQ2FsbGJhY2spO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGFYSFIsIGFUZXh0U3RhdHVzLCBhRXJyb3IpIHtcbiAgICAgICAgICBVdGlsaXR5SGVscGVyLmhhbmRsZUVycm9yKFwiQXV0b0NvbXBsZXRlQXBpXCIsIHJlcXVlc3ROYW1lLCBhWEhSLnJlc3BvbnNlVGV4dCwgYUNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAvLyBhZGQgcGVuZGluZyByZXF1ZXN0IHRvIGEgbGlzdCBzbyBwZW5kaW5nIHJlcXVlc3Qgd291bGQgYmUgY2FuY2VsbGVkIGZvclxuICAgIC8vIGEgbG9uZyBwZXJpb2Qgb2YgdGltZSBhbmQgYWxzbyBhbGwgcGVuZGluZyByZXF1ZXN0cyBjYW4gYmUgYWJvcnRlZCB3aGVuXG4gICAgLy8gdXNlciBzaWducyBvdXQuXG4gICAgQXBpSGVscGVyLmFkZFBlbmRpbmdSZXF1ZXN0KHJlcXVlc3QsIHJlcXVlc3ROYW1lKTtcblxuICAgIHJldHVybiByZXF1ZXN0O1xuICB9XG59O1xuIl19