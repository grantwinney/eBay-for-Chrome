/*!
 * Copyright (C) 2007-2015 eBay Inc. All Rights Reserved.
 */
function Account(aUserId) {
    if (typeof aUserId !== "undefined") {
        this._init(aUserId);
    }
}
Account.SCHEMA = {
    NAME: "Account",
    PROPERTIES: {
        "email": { type: "string", xml: "Email" },
        "userId": { type: "string", xml: "UserID" },
        "token": { type: "string", xml: "" },
        "registrationSite": { type: "string", xml: "RegistrationSite" },
        "shippingCountry": { type: "string", xml: "" },
        "feedbackRating": { type: "number", xml: "FeedbackScore" },
        "numUnreadMessages": { type: "number", xml: "" },
        "avatarImage": { type: "string", xml: "" },
        "name": { type: "string", xml: "" }
    }
};
Account.prototype = {
    name: Account.SCHEMA.NAME,
    _init: function (aUserId) {
        this.set("userId", aUserId);
    },
    get: function (aProperty) {
        if (!Account.SCHEMA.PROPERTIES.hasOwnProperty(aProperty)) {
            throw "Account doesn't have property " + aProperty;
        }
        var account;
        if (typeof this["_" + aProperty] === "undefined" || this["_" + aProperty] === null) {
            account = PropertyDAO.get(PropertyDAO.PROP_ACTIVE_ACCOUNT);
            this["_" + aProperty] = account ? account[aProperty] : null;
        }
        return this["_" + aProperty];
    },
    set: function (aProperty, aValue) {
        if (!Account.SCHEMA.PROPERTIES.hasOwnProperty(aProperty)) {
            throw "Account doesn't have property " + aProperty;
        }
        var account;
        var typedValue;
        var type = Account.SCHEMA.PROPERTIES[aProperty].type;
        typedValue = ObjectHelper.getTypedValue(type, aValue);
        this["_" + aProperty] = typedValue;
        account = PropertyDAO.get(PropertyDAO.PROP_ACTIVE_ACCOUNT);
        account = account || {};
        account[aProperty] = typedValue;
        PropertyDAO.set(PropertyDAO.PROP_ACTIVE_ACCOUNT, account);
    },
    delete: function () {
        var prop;
        for (prop in Account.SCHEMA.PROPERTIES) {
            this["_" + prop] = null;
        }
        PropertyDAO.remove(PropertyDAO.PROP_ACTIVE_ACCOUNT);
    }
};
Account.getAccount = function () {
    var account;
    account = new this();
    if (typeof account.get("userId") !== "undefined" &&
        account.get("userId") !== null) {
        return account;
    }
    else {
        return null;
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjb3VudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2JhY2tncm91bmQvY29yZS9vYmplY3RzL2FjY291bnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFVSCxpQkFBaUIsT0FBTztJQUV0QixFQUFFLENBQUMsQ0FBQyxPQUFPLE9BQU8sS0FBSyxXQUFXLENBQUMsQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdEIsQ0FBQztBQUNILENBQUM7QUFHRCxPQUFPLENBQUMsTUFBTSxHQUFHO0lBQ2YsSUFBSSxFQUFFLFNBQVM7SUFDZixVQUFVLEVBQUU7UUFDVixPQUFPLEVBQWMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFHLEdBQUcsRUFBRSxPQUFPLEVBQUU7UUFDdEQsUUFBUSxFQUFhLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRyxHQUFHLEVBQUUsUUFBUSxFQUFFO1FBQ3ZELE9BQU8sRUFBYyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUcsR0FBRyxFQUFFLEVBQUUsRUFBRTtRQUNqRCxrQkFBa0IsRUFBRyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUcsR0FBRyxFQUFFLGtCQUFrQixFQUFFO1FBQ2pFLGlCQUFpQixFQUFJLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRyxHQUFHLEVBQUUsRUFBRSxFQUFFO1FBQ2pELGdCQUFnQixFQUFLLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRyxHQUFHLEVBQUUsZUFBZSxFQUFFO1FBQzlELG1CQUFtQixFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRyxHQUFHLEVBQUUsRUFBRSxFQUFFO1FBQ2pELGFBQWEsRUFBUSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUcsR0FBRyxFQUFFLEVBQUUsRUFBRTtRQUNqRCxNQUFNLEVBQWUsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFHLEdBQUcsRUFBRSxFQUFFLEVBQUU7S0FD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QUFDLENBQUM7UUFDTixNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2QsQ0FBQztBQUNILENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChDKSAyMDA3LTIwMTUgZUJheSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKi9cblxuLypcbiAgdmFyIE9iamVjdEhlbHBlciA9IHJlcXVpcmUoXCJjb3JlL2hlbHBlcnMvb2JqZWN0SGVscGVyXCIpLk9iamVjdEhlbHBlcjtcbiAgdmFyIFByb3BlcnR5REFPID0gcmVxdWlyZShcInN0b3JhZ2UvcHJvcGVydHlEQU9cIikuUHJvcGVydHlEQU87XG4qL1xuXG4vKipcbiAqIEFjY291bnQgRGF0YSBUcmFuc2ZlciBPYmplY3QuXG4gKi9cbmZ1bmN0aW9uIEFjY291bnQoYVVzZXJJZCkge1xuICAvLyBXaGVuIHdlIHVzZSBBY2NvdW50IGZvciByZXRyaWV2aW5nLCB3ZSBkb24ndCBwYXNzIGEgdXNlcklkXG4gIGlmICh0eXBlb2YgYVVzZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHRoaXMuX2luaXQoYVVzZXJJZCk7XG4gIH1cbn1cblxuLyogRFRPIFNjaGVtYS4gKi9cbkFjY291bnQuU0NIRU1BID0ge1xuICBOQU1FOiBcIkFjY291bnRcIixcbiAgUFJPUEVSVElFUzoge1xuICAgIFwiZW1haWxcIjogICAgICAgICAgICAgeyB0eXBlOiBcInN0cmluZ1wiLCAgeG1sOiBcIkVtYWlsXCIgfSxcbiAgICBcInVzZXJJZFwiOiAgICAgICAgICAgIHsgdHlwZTogXCJzdHJpbmdcIiwgIHhtbDogXCJVc2VySURcIiB9LFxuICAgIFwidG9rZW5cIjogICAgICAgICAgICAgeyB0eXBlOiBcInN0cmluZ1wiLCAgeG1sOiBcIlwiIH0sXG4gICAgXCJyZWdpc3RyYXRpb25TaXRlXCI6ICB7IHR5cGU6IFwic3RyaW5nXCIsICB4bWw6IFwiUmVnaXN0cmF0aW9uU2l0ZVwiIH0sXG4gICAgXCJzaGlwcGluZ0NvdW50cnlcIjogICB7IHR5cGU6IFwic3RyaW5nXCIsICB4bWw6IFwiXCIgfSxcbiAgICBcImZlZWRiYWNrUmF0aW5nXCI6ICAgIHsgdHlwZTogXCJudW1iZXJcIiwgIHhtbDogXCJGZWVkYmFja1Njb3JlXCIgfSxcbiAgICBcIm51bVVucmVhZE1lc3NhZ2VzXCI6IHsgdHlwZTogXCJudW1iZXJcIiwgIHhtbDogXCJcIiB9LFxuICAgIFwiYXZhdGFySW1hZ2VcIjogICAgICAgeyB0eXBlOiBcInN0cmluZ1wiLCAgeG1sOiBcIlwiIH0sXG4gICAgXCJuYW1lXCI6ICAgICAgICAgICAgICB7IHR5cGU6IFwic3RyaW5nXCIsICB4bWw6IFwiXCIgfVxuICB9XG59O1xuXG4vKiBEVE8gUHJvdG90eXBlLiAqL1xuQWNjb3VudC5wcm90b3R5cGUgPSB7XG4gIC8qKlxuICAgKiBVc2VkIHRvIGRldGVybWluZSB0aGUgdHlwZSBvZiB0aGUgb2JqZWN0XG4gICAqL1xuICBuYW1lIDogQWNjb3VudC5TQ0hFTUEuTkFNRSxcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIG9iamVjdC5cbiAgICogQHBhcmFtIGFVc2VySWQgdGhlIHVzZXIgaWQuXG4gICAqL1xuICBfaW5pdCA6IGZ1bmN0aW9uKGFVc2VySWQpIHtcbiAgICB0aGlzLnNldChcInVzZXJJZFwiLCBhVXNlcklkKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgKiBAcGFyYW0gYVByb3BlcnR5IHRoZSBwcm9wZXJ0eSBuYW1lLlxuICAgKiBAcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZS5cbiAgICovXG4gIGdldCA6IGZ1bmN0aW9uKGFQcm9wZXJ0eSkge1xuICAgIGlmICghQWNjb3VudC5TQ0hFTUEuUFJPUEVSVElFUy5oYXNPd25Qcm9wZXJ0eShhUHJvcGVydHkpKSB7XG4gICAgICB0aHJvdyBcIkFjY291bnQgZG9lc24ndCBoYXZlIHByb3BlcnR5IFwiICsgYVByb3BlcnR5O1xuICAgIH1cbiAgICB2YXIgYWNjb3VudDtcblxuICAgIGlmICh0eXBlb2YgdGhpc1tcIl9cIiArIGFQcm9wZXJ0eV0gPT09IFwidW5kZWZpbmVkXCIgfHwgdGhpc1tcIl9cIiArIGFQcm9wZXJ0eV0gPT09IG51bGwpIHtcbiAgICAgIGFjY291bnQgPSBQcm9wZXJ0eURBTy5nZXQoUHJvcGVydHlEQU8uUFJPUF9BQ1RJVkVfQUNDT1VOVCk7XG4gICAgICB0aGlzW1wiX1wiICsgYVByb3BlcnR5XSA9IGFjY291bnQgPyBhY2NvdW50W2FQcm9wZXJ0eV0gOiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpc1tcIl9cIiArIGFQcm9wZXJ0eV07XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGdpdmVuIHByb3BlcnR5IHRvIHRoZSBnaXZlbiB2YWx1ZSwgY2hlY2tpbmcgdGhhdCB0aGUgdmFsdWUgaXMgb2ZcbiAgICogdGhlIGNvcnJlY3QgdHlwZSBmb3IgdGhlIHByb3BlcnR5XG4gICAqIEBwYXJhbSBhUHJvcGVydHkgdGhlIHByb3BlcnR5IG5hbWUuXG4gICAqIEBwYXJhbSBhVmFsdWUgdGhlIHByb3BlcnR5IHZhbHVlLlxuICAgKi9cbiAgc2V0IDogZnVuY3Rpb24oYVByb3BlcnR5LCBhVmFsdWUpIHtcbiAgICBpZiAoIUFjY291bnQuU0NIRU1BLlBST1BFUlRJRVMuaGFzT3duUHJvcGVydHkoYVByb3BlcnR5KSkge1xuICAgICAgdGhyb3cgXCJBY2NvdW50IGRvZXNuJ3QgaGF2ZSBwcm9wZXJ0eSBcIiArIGFQcm9wZXJ0eTtcbiAgICB9XG5cbiAgICB2YXIgYWNjb3VudDtcbiAgICB2YXIgdHlwZWRWYWx1ZTtcblxuICAgIHZhciB0eXBlID0gQWNjb3VudC5TQ0hFTUEuUFJPUEVSVElFU1thUHJvcGVydHldLnR5cGU7XG4gICAgdHlwZWRWYWx1ZSA9IE9iamVjdEhlbHBlci5nZXRUeXBlZFZhbHVlKHR5cGUsIGFWYWx1ZSk7XG5cbiAgICB0aGlzW1wiX1wiICsgYVByb3BlcnR5XSA9IHR5cGVkVmFsdWU7XG5cbiAgICBhY2NvdW50ID0gUHJvcGVydHlEQU8uZ2V0KFByb3BlcnR5REFPLlBST1BfQUNUSVZFX0FDQ09VTlQpO1xuICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYW4gYWNjb3VudCwgd2UgY3JlYXRlIGFuIGVtcHR5IG9iamVjdDtcbiAgICBhY2NvdW50ID0gYWNjb3VudCB8fCB7fTtcbiAgICBhY2NvdW50W2FQcm9wZXJ0eV0gPSB0eXBlZFZhbHVlO1xuXG4gICAgUHJvcGVydHlEQU8uc2V0KFByb3BlcnR5REFPLlBST1BfQUNUSVZFX0FDQ09VTlQsIGFjY291bnQpXG4gIH0sXG5cbiAgZGVsZXRlIDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHByb3A7XG4gICAgZm9yIChwcm9wIGluIEFjY291bnQuU0NIRU1BLlBST1BFUlRJRVMpIHtcbiAgICAgIHRoaXNbXCJfXCIgKyBwcm9wXSA9IG51bGw7XG4gICAgfVxuICAgIFByb3BlcnR5REFPLnJlbW92ZShQcm9wZXJ0eURBTy5QUk9QX0FDVElWRV9BQ0NPVU5UKTtcbiAgfVxufTtcblxuQWNjb3VudC5nZXRBY2NvdW50ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhY2NvdW50O1xuICBhY2NvdW50ID0gbmV3IHRoaXMoKTtcbiAgaWYgKHR5cGVvZiBhY2NvdW50LmdldChcInVzZXJJZFwiKSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgYWNjb3VudC5nZXQoXCJ1c2VySWRcIikgIT09IG51bGwpIHtcbiAgICByZXR1cm4gYWNjb3VudDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcbiJdfQ==