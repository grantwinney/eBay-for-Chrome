/*!
 * Copyright (C) 2007-2015 eBay Inc. All Rights Reserved.
 */
function Item(aItemId) {
    this._init(aItemId);
}
Item.SCHEMA = {
    NAME: "Item",
    PROPERTIES: {
        "itemId": { type: "string", xml: "BuySell.ItemID" },
        "userMaxBid": { type: "number", xml: "BuySell.BiddingDetails.MaxBid" },
        "convertedMaxBid": { type: "number", xml: "BuySell.ConvertedMaxBid" },
        "convertedMaxBidCurrency": { type: "string", xml: "BuySell.ConvertedMaxBid.@currencyID" },
        "startTime": { type: "string", xml: "BuySell.ListingDetails.StartTime" },
        "endTime": { type: "string", xml: "BuySell.ListingDetails.EndTime" },
        "viewItemUrl": { type: "string", xml: "BuySell.ListingDetails.ViewItemURLForNaturalSearch" },
        "listingFormat": { type: "listingFormat", xml: "BuySell.ListingType" },
        "sellerUserId": { type: "string", xml: "BuySell.Seller.UserID" },
        "sellerFeedbackRating": { type: "number", xml: "BuySell.Seller.FeedbackScore" },
        "numBids": { type: "number", xml: "BuySell.SellingStatus.BidCount" },
        "isReserveMet": { type: "boolean", xml: "BuySell.SellingStatus.ReserveMet", defaultValue: true },
        "currentPrice": { type: "number", xml: "BuySell.SellingStatus.CurrentPrice" },
        "currency": { type: "string", xml: "BuySell.SellingStatus.CurrentPrice.@currencyID" },
        "convertedCurrentPrice": { type: "number", xml: "BuySell.SellingStatus.ConvertedCurrentPrice" },
        "convertedCurrency": { type: "string", xml: "BuySell.SellingStatus.ConvertedCurrentPrice.@currencyID" },
        "buyItNowPrice": { type: "number", xml: "BuySell.BuyItNowPrice" },
        "highBidderId": { type: "string", xml: "BuySell.SellingStatus.HighBidder.UserID" },
        "highBidderFeedbackScore": { type: "number", xml: "BuySell.SellingStatus.HighBidder.FeedbackScore" },
        "shippingType": { type: "string", xml: "BuySell.ShippingDetails.ShippingType" },
        "timeLeft": { type: "string", xml: "BuySell.TimeLeft" },
        "title": { type: "string", xml: "BuySell.Title" },
        "numWatching": { type: "number", xml: "BuySell.WatchCount", defaultValue: "0" },
        "quantity": { type: "number", xml: "BuySell.QuantityAvailable" },
        "isRelisted": { type: "boolean", xml: "BuySell.Relisted", defaultValue: false },
        "bestOfferCount": { type: "number", xml: "BuySell.BestOfferDetails.BestOfferCount" },
        "galleryUrl": { type: "string", xml: "BuySell.PictureDetails.GalleryURL" },
        "shippingCost": { type: "number", xml: "BuySell.ShippingDetails.ShippingServiceOptions.ShippingServiceCost" },
        "shippingCostCurrency": { type: "string", xml: "BuySell.ShippingDetails.ShippingServiceOptions.ShippingServiceCost.@currencyID" },
        "isLocalPickup": { type: "boolean", xml: "BuySell.ShippingDetails.ShippingServiceOptions.LocalPickup", defaultValue: false },
        "bestOffer": { type: "number", xml: "BuySell.BestOfferDetails.BestOffer", defaultValue: "0" },
        "bestOfferCurrency": { type: "string", xml: "BuySell.BestOfferDetails.BestOffer.@currencyID" },
        "bestOfferStatus": { type: "string", xml: "BuySell.BestOfferDetails.BestOfferStatus" },
        "convertedBestOffer": { type: "number", xml: "BuySell.BestOfferDetails.ConvertedBestOffer", defaultValue: "0" },
        "convertedBestOfferCurrency": { type: "string", xml: "BuySell.BestOfferDetails.ConvertedBestOffer.@currencyID" },
        "isEnded": { type: "boolean", xml: "" },
        "quantityRemaining": { type: "number", xml: "" },
        "type": { type: "string", xml: "" },
        "transactions": { type: "object", xml: "" },
        "sound": { type: "string", xml: "" }
    }
};
Item.XML_PREFIXES = {
    BUYSELL: "BuySell",
    MULTIPLE: "Multiple",
    SHIPPING: "Shipping"
};
Item.TYPES = {
    WATCHING: "Watching",
    BIDDING: "Bidding",
    WON: "Won",
    LOST: "Lost",
    SELLING_OFFER: "SellingOffer",
    SELLING: "Selling",
    SCHEDULED: "Scheduled",
    SOLD: "Sold",
    UNSOLD: "Unsold",
    BEST_OFFER: "BestOffer"
};
Item.STATES = {
    WATCHING: 100,
    WATCHING_CLASSIFIED_AD: 101,
    BUYING: 200,
    BUYING_SUCCESS_RESERVE_NOT_MET: 201,
    BUYING_OUTBID_RESERVE_NOT_MET: 202,
    BUYING_SUCCESS: 203,
    BUYING_OUTBID: 204,
    BUYING_ITEM_WON_NOT_PAID: 205,
    BUYING_ITEM_WON_PAID: 206,
    BUYING_ITEM_WON_SHIPPED: 207,
    BUYING_ITEM_WON_SHIPPED_FEEDBACK_LEFT: 208,
    BUYING_ITEM_LOST: 209,
    SELLING: 300,
    SELLING_RESERVE_NOT_MET: 301,
    SELLING_WITH_OFFERS: 302,
    SELLING_ITEM_SOLD: 303,
    SELLING_ITEM_SOLD_PAID_AND_SHIP: 304,
    SELLING_ITEM_SOLD_REFUNDED: 305,
    SELLING_ITEM_SOLD_NOT_PAID: 306,
    SELLING_ITEM_SOLD_SHIPPED: 307,
    SELLING_ITEM_SOLD_FEEDBACK_RECEIVED: 308,
    SELLING_ITEM_UNSOLD: 310,
    SELLING_ITEM_UNSOLD_RELISTED: 311,
    SELLING_SCHEDULED: 312,
    BEST_OFFER_PENDING: 401,
    BEST_OFFER_DECLINED: 402,
    BEST_OFFER_EXPIRED: 403,
    BEST_OFFER_COUNTERED: 404,
};
Item.LISTING_FORMATS = {
    CHINESE: "Chinese",
    DUTCH: "Dutch",
    LIVE: "Live",
    FIXED: "FixedPriceItem",
    STORE_FIXED: "StoresFixedPrice",
    CLASSIFIED: "AdType",
    LEAD_GENERATION: "LeadGeneration"
};
Item.SHIPPING = {
    SHIPPING_TYPE_CALCULATED: "Calculated",
    SHIPPING_TYPE_CALCULATED_DOMESTIC: "CalculatedDomesticFlatInternational",
    SHIPPING_TYPE_FLAT: "Flat",
    SHIPPING_TYPE_FLAT_DOMESTIC: "FlatDomesticCalculatedInternational",
    SHIPPING_TYPE_FREE: "Free",
    SHIPPING_TYPE_FREIGHT: "Freight",
    SHIPPING_TYPE_FREIGHT_FLAT: "FreightFlat",
    SHIPPING_TYPE_UNSPECIFIED: "NotSpecified"
};
Item.prototype = {
    name: Item.SCHEMA.NAME,
    _init: function (aItemId) {
        this.set("itemId", aItemId);
    },
    get: function (aProperty) {
        return this["_" + aProperty];
    },
    set: function (aProperty, aValue) {
        var type = Item.SCHEMA.PROPERTIES[aProperty].type;
        this["_" + aProperty] = ObjectHelper.getTypedValue(type, aValue);
    },
    isEnded: function () {
        var timeLeft = this.get("timeLeft");
        var isEnded;
        isEnded = (timeLeft !== null && (timeLeft.length === 0 || timeLeft == "PT0S"));
        if (!isEnded) {
            var endTime = this.get("endTime");
            var ebayTime = CommonService.geteBayTime().getTime();
            isEnded = (Math.max(0, endTime - ebayTime) === 0);
        }
        return isEnded;
    },
    updateTo: function (aNewObject) {
        return ObjectHelper.updateTo(this, aNewObject, Item.SCHEMA);
    },
    updateWithJSON: function (aJSON) {
        ObjectHelper.updateWithJSON(this, aJSON, Item.SCHEMA);
    },
    getCurrentState: function (aUserId) {
        var state = null;
        var transactions;
        var transaction;
        switch (this.get("type")) {
            case Item.TYPES.WATCHING:
                var listingFormat = this.get("listingFormat");
                if (Item.LISTING_FORMATS.CLASSIFIED == listingFormat ||
                    Item.LISTING_FORMATS.LEAD_GENERATION == listingFormat) {
                    state = Item.STATES.WATCHING_CLASSIFIED_AD;
                }
                else {
                    state = Item.STATES.WATCHING;
                }
                break;
            case Item.TYPES.BIDDING:
                var isReserveMet = this.get("isReserveMet");
                if (this.get("highBidderId").toLowerCase() == aUserId.toLowerCase()) {
                    if (isReserveMet) {
                        state = Item.STATES.BUYING_SUCCESS;
                    }
                    else {
                        state = Item.STATES.BUYING_SUCCESS_RESERVE_NOT_MET;
                    }
                }
                else {
                    if (isReserveMet) {
                        state = Item.STATES.BUYING_OUTBID;
                    }
                    else {
                        state = Item.STATES.BUYING_OUTBID_RESERVE_NOT_MET;
                    }
                }
                break;
            case Item.TYPES.WON:
                transactions = this.get("transactions");
                state = Item.STATES.BUYING_ITEM_WON;
                if (transactions && transactions.length > 0) {
                    transaction = transactions[0];
                    if (transaction.get("isShipped")) {
                        if (transaction.get("feedbackLeftType")) {
                            state = Item.STATES.BUYING_ITEM_WON_SHIPPED_FEEDBACK_LEFT;
                        }
                        else {
                            state = Item.STATES.BUYING_ITEM_WON_SHIPPED;
                        }
                    }
                    else if (!transaction.get("isPaidFor")) {
                        state = Item.STATES.BUYING_ITEM_WON_NOT_PAID;
                    }
                    else if (transaction.get("isPaidFor")) {
                        state = Item.STATES.BUYING_ITEM_WON_PAID;
                    }
                }
                break;
            case Item.TYPES.LOST:
                state = Item.STATES.BUYING_ITEM_LOST;
                break;
            case Item.TYPES.SELLING_OFFER:
            case Item.TYPES.SELLING:
                var numBids = this.get("numBids");
                if (numBids && numBids > 0 && !this.get("isReserveMet")) {
                    state = Item.STATES.SELLING_RESERVE_NOT_MET;
                }
                else if (numBids && numBids > 0) {
                    state = Item.STATES.SELLING_ITEM_SOLD;
                }
                else if (this.get("bestOfferCount") && this.get("bestOfferCount") > 0) {
                    state = Item.STATES.SELLING_WITH_OFFERS;
                }
                else {
                    state = Item.STATES.SELLING;
                }
                break;
            case Item.TYPES.SOLD:
                transactions = this.get("transactions");
                state = Item.STATES.SELLING_ITEM_SOLD;
                if (transactions && transactions.length > 0) {
                    transaction = transactions[0];
                    if (transaction.get("isRefunded")) {
                        state = Item.STATES.SELLING_ITEM_SOLD_REFUNDED;
                    }
                    else if (transaction.get("isShipped")) {
                        state = Item.STATES.SELLING_ITEM_SOLD_SHIPPED;
                        if (transaction.get("feedbackReceivedType")) {
                            state = Item.STATES.SELLING_ITEM_SOLD_FEEDBACK_RECEIVED;
                        }
                    }
                    else if (transaction.get("isPaidFor")) {
                        state = Item.STATES.SELLING_ITEM_SOLD_PAID_AND_SHIP;
                    }
                    else {
                        state = Item.STATES.SELLING_ITEM_SOLD_NOT_PAID;
                    }
                }
                break;
            case Item.TYPES.UNSOLD:
                if (this.get("isRelisted")) {
                    state = Item.STATES.SELLING_ITEM_UNSOLD_RELISTED;
                }
                else {
                    state = Item.STATES.SELLING_ITEM_UNSOLD;
                }
                break;
            case Item.TYPES.SCHEDULED:
                state = Item.STATES.SELLING_SCHEDULED;
                break;
            case Item.TYPES.BEST_OFFER:
                if (this.get("bestOfferStatus").toLowerCase() == "pending") {
                    state = Item.STATES.BEST_OFFER_PENDING;
                }
                else if (this.get("bestOfferStatus").toLowerCase() == "declined") {
                    state = Item.STATES.BEST_OFFER_DECLINED;
                }
                else if (this.get("bestOfferStatus").toLowerCase() == "expired") {
                    state = Item.STATES.BEST_OFFER_EXPIRED;
                }
                else if (this.get("bestOfferStatus").toLowerCase() == "countered") {
                    state = Item.STATES.BEST_OFFER_COUNTERED;
                }
                else {
                    state = Item.STATES.WATCHING;
                }
                break;
        }
        return state;
    },
    fromXML: function (aXmlNode, aExclusivePrefix) {
        var item = ObjectHelper.fromXML(aXmlNode, Item, aExclusivePrefix);
        this.updateTo(item);
        this.set("isEnded", (this.get("timeLeft") == "PT0S"));
        this.set("quantityRemaining", this.get("quantity") - this.get("quantitySold"));
        if (this.get("startTime")) {
            this.set("startTime", UtilityHelper.dateFromIso8601(this.get("startTime")).getTime());
        }
        if (this.get("endTime")) {
            this.set("endTime", UtilityHelper.dateFromIso8601(this.get("endTime")).getTime());
        }
        else {
            if (this.get("timeLeft")) {
                var endTime = CommonService.geteBayTime().getTime() +
                    UtilityHelper.iso8601DurationToMilliseconds(this.get("timeLeft"));
                if (endTime && 0 < endTime) {
                    this.set("endTime", endTime);
                }
            }
        }
        this.set("buyItNowPrice", this.get("currentPrice"));
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaXRlbS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2JhY2tncm91bmQvY29yZS9vYmplY3RzL2l0ZW0uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFZSCxjQUFjLE9BQU87SUFDbkIsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN0QixDQUFDO0FBR0QsSUFBSSxDQUFDLE1BQU0sR0FBRztJQUNaLElBQUksRUFBRSxNQUFNO0lBQ1osVUFBVSxFQUFFO1FBRVYsUUFBUSxFQUFtQixFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLGdCQUFnQixFQUFFO1FBQ3BFLFlBQVksRUFBZSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLCtCQUErQixFQUFFO1FBQ25GLGlCQUFpQixFQUFVLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUUseUJBQXlCLEVBQUU7UUFDN0UseUJBQXlCLEVBQUUsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLEdBQUcsRUFBRSxxQ0FBcUMsRUFBRTtRQUN6RixXQUFXLEVBQWdCLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUUsa0NBQWtDLEVBQUU7UUFDdEYsU0FBUyxFQUFrQixFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLGdDQUFnQyxFQUFFO1FBRXBGLGFBQWEsRUFBYyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLG9EQUFvRCxFQUFDO1FBQ3ZHLGVBQWUsRUFBWSxFQUFFLElBQUksRUFBRSxlQUFlLEVBQUUsR0FBRyxFQUFFLHFCQUFxQixFQUFFO1FBQ2hGLGNBQWMsRUFBYSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLHVCQUF1QixFQUFFO1FBQzNFLHNCQUFzQixFQUFLLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUUsOEJBQThCLEVB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R0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMxQixJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxhQUFhLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQ3hGLENBQUM7UUFDRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN4QixJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxhQUFhLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQ3BGLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN6QixJQUFJLE9BQU8sR0FBRyxhQUFhLENBQUMsV0FBVyxFQUFFLENBQUMsT0FBTyxFQUFFO29CQUNqRCxhQUFhLENBQUMsNkJBQTZCLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO2dCQUNwRSxFQUFFLENBQUMsQ0FBQyxPQUFPLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7b0JBQzNCLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUMvQixDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUM7UUFFRCxJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7SUFDdEQsQ0FBQztDQUNGLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoQykgMjAwNy0yMDE1IGVCYXkgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICovXG5cbi8qXG4gIHZhciBPYmplY3RIZWxwZXIgPSByZXF1aXJlKFwiY29yZS9oZWxwZXJzL29iamVjdEhlbHBlclwiKS5PYmplY3RIZWxwZXI7XG4gIHZhciBVdGlsaXR5SGVscGVyID0gcmVxdWlyZShcImhlbHBlcnMvdXRpbGl0eUhlbHBlclwiKS5VdGlsaXR5SGVscGVyO1xuICB2YXIgQ29tbW9uU2VydmljZSA9IHJlcXVpcmUoXCJjb3JlL3NlcnZpY2VzL2NvbW1vblNlcnZpY2VcIikuQ29tbW9uU2VydmljZTtcbiovXG5cbi8qKlxuICogRWJheSBpdGVtIG9iamVjdC5cbiAqIEBwYXJhbSBhSXRlbUlkXG4gKi9cbmZ1bmN0aW9uIEl0ZW0oYUl0ZW1JZCkge1xuICB0aGlzLl9pbml0KGFJdGVtSWQpO1xufVxuXG4vKiBEVE8gU2NoZW1hLiAqL1xuSXRlbS5TQ0hFTUEgPSB7XG4gIE5BTUU6IFwiSXRlbVwiLFxuICBQUk9QRVJUSUVTOiB7XG4gICAgLy8gRmllbGRzIHRoYXQgY29tZSBpbiBnZXRNeWVCYXlCdXlpbmcvU2VsbGluZyByZXNwb25zZXNcbiAgICBcIml0ZW1JZFwiOiAgICAgICAgICAgICAgICAgIHsgdHlwZTogXCJzdHJpbmdcIiwgeG1sOiBcIkJ1eVNlbGwuSXRlbUlEXCIgfSxcbiAgICBcInVzZXJNYXhCaWRcIjogICAgICAgICAgICAgIHsgdHlwZTogXCJudW1iZXJcIiwgeG1sOiBcIkJ1eVNlbGwuQmlkZGluZ0RldGFpbHMuTWF4QmlkXCIgfSxcbiAgICBcImNvbnZlcnRlZE1heEJpZFwiOiAgICAgICAgIHsgdHlwZTogXCJudW1iZXJcIiwgeG1sOiBcIkJ1eVNlbGwuQ29udmVydGVkTWF4QmlkXCIgfSxcbiAgICBcImNvbnZlcnRlZE1heEJpZEN1cnJlbmN5XCI6IHsgdHlwZTogXCJzdHJpbmdcIiwgeG1sOiBcIkJ1eVNlbGwuQ29udmVydGVkTWF4QmlkLkBjdXJyZW5jeUlEXCIgfSxcbiAgICBcInN0YXJ0VGltZVwiOiAgICAgICAgICAgICAgIHsgdHlwZTogXCJzdHJpbmdcIiwgeG1sOiBcIkJ1eVNlbGwuTGlzdGluZ0RldGFpbHMuU3RhcnRUaW1lXCIgfSxcbiAgICBcImVuZFRpbWVcIiA6ICAgICAgICAgICAgICAgIHsgdHlwZTogXCJzdHJpbmdcIiwgeG1sOiBcIkJ1eVNlbGwuTGlzdGluZ0RldGFpbHMuRW5kVGltZVwiIH0sXG4gICAgLy8gTVNLVSBVcmwgaXMgYnJva2VuIHNvIHVzaW5nIFZpZXdJdGVtVVJMRm9yTmF0dXJhbFNlYXJjaCBpbnN0ZWFkIG9mIFZpZXdJdGVtVVJMXG4gICAgXCJ2aWV3SXRlbVVybFwiIDogICAgICAgICAgICB7IHR5cGU6IFwic3RyaW5nXCIsIHhtbDogXCJCdXlTZWxsLkxpc3RpbmdEZXRhaWxzLlZpZXdJdGVtVVJMRm9yTmF0dXJhbFNlYXJjaFwifSxcbiAgICBcImxpc3RpbmdGb3JtYXRcIjogICAgICAgICAgIHsgdHlwZTogXCJsaXN0aW5nRm9ybWF0XCIsIHhtbDogXCJCdXlTZWxsLkxpc3RpbmdUeXBlXCIgfSxcbiAgICBcInNlbGxlclVzZXJJZFwiOiAgICAgICAgICAgIHsgdHlwZTogXCJzdHJpbmdcIiwgeG1sOiBcIkJ1eVNlbGwuU2VsbGVyLlVzZXJJRFwiIH0sXG4gICAgXCJzZWxsZXJGZWVkYmFja1JhdGluZ1wiOiAgICB7IHR5cGU6IFwibnVtYmVyXCIsIHhtbDogXCJCdXlTZWxsLlNlbGxlci5GZWVkYmFja1Njb3JlXCIgfSxcbiAgICBcIm51bUJpZHNcIjogICAgICAgICAgICAgICAgIHsgdHlwZTogXCJudW1iZXJcIiwgeG1sOiBcIkJ1eVNlbGwuU2VsbGluZ1N0YXR1cy5CaWRDb3VudFwiIH0sXG4gICAgXCJpc1Jlc2VydmVNZXRcIjogICAgICAgICAgICB7IHR5cGU6IFwiYm9vbGVhblwiLCB4bWw6IFwiQnV5U2VsbC5TZWxsaW5nU3RhdHVzLlJlc2VydmVNZXRcIiwgZGVmYXVsdFZhbHVlOiB0cnVlIH0sXG4gICAgXCJjdXJyZW50UHJpY2VcIjogICAgICAgICAgICB7IHR5cGU6IFwibnVtYmVyXCIsIHhtbDogXCJCdXlTZWxsLlNlbGxpbmdTdGF0dXMuQ3VycmVudFByaWNlXCIgfSxcbiAgICBcImN1cnJlbmN5XCI6ICAgICAgICAgICAgICAgIHsgdHlwZTogXCJzdHJpbmdcIiwgeG1sOiBcIkJ1eVNlbGwuU2VsbGluZ1N0YXR1cy5DdXJyZW50UHJpY2UuQGN1cnJlbmN5SURcIiB9LFxuICAgIFwiY29udmVydGVkQ3VycmVudFByaWNlXCI6ICAgeyB0eXBlOiBcIm51bWJlclwiLCB4bWw6IFwiQnV5U2VsbC5TZWxsaW5nU3RhdHVzLkNvbnZlcnRlZEN1cnJlbnRQcmljZVwiIH0sXG4gICAgXCJjb252ZXJ0ZWRDdXJyZW5jeVwiOiAgICAgICB7IHR5cGU6IFwic3RyaW5nXCIsIHhtbDogXCJCdXlTZWxsLlNlbGxpbmdTdGF0dXMuQ29udmVydGVkQ3VycmVudFByaWNlLkBjdXJyZW5jeUlEXCIgfSxcbiAgICBcImJ1eUl0Tm93UHJpY2VcIjogICAgICAgICAgIHsgdHlwZTogXCJudW1iZXJcIiwgeG1sOiBcIkJ1eVNlbGwuQnV5SXROb3dQcmljZVwiIH0sXG4gICAgXCJoaWdoQmlkZGVySWRcIjogICAgICAgICAgICB7IHR5cGU6IFwic3RyaW5nXCIsIHhtbDogXCJCdXlTZWxsLlNlbGxpbmdTdGF0dXMuSGlnaEJpZGRlci5Vc2VySURcIiB9LFxuICAgIFwiaGlnaEJpZGRlckZlZWRiYWNrU2NvcmVcIjogeyB0eXBlOiBcIm51bWJlclwiLCB4bWw6IFwiQnV5U2VsbC5TZWxsaW5nU3RhdHVzLkhpZ2hCaWRkZXIuRmVlZGJhY2tTY29yZVwiIH0sXG4gICAgXCJzaGlwcGluZ1R5cGVcIjogICAgICAgICAgICB7IHR5cGU6IFwic3RyaW5nXCIsIHhtbDogXCJCdXlTZWxsLlNoaXBwaW5nRGV0YWlscy5TaGlwcGluZ1R5cGVcIiB9LFxuICAgIFwidGltZUxlZnRcIjogICAgICAgICAgICAgICAgeyB0eXBlOiBcInN0cmluZ1wiLCB4bWw6IFwiQnV5U2VsbC5UaW1lTGVmdFwiIH0sXG4gICAgXCJ0aXRsZVwiOiAgICAgICAgICAgICAgICAgICB7IHR5cGU6IFwic3RyaW5nXCIsIHhtbDogXCJCdXlTZWxsLlRpdGxlXCIgfSxcbiAgICBcIm51bVdhdGNoaW5nXCI6ICAgICAgICAgICAgIHsgdHlwZTogXCJudW1iZXJcIiwgeG1sOiBcIkJ1eVNlbGwuV2F0Y2hDb3VudFwiLCBkZWZhdWx0VmFsdWU6IFwiMFwiIH0sXG4gICAgXCJxdWFudGl0eVwiOiAgICAgICAgICAgICAgICB7IHR5cGU6IFwibnVtYmVyXCIsIHhtbDogXCJCdXlTZWxsLlF1YW50aXR5QXZhaWxhYmxlXCIgfSxcbiAgICBcImlzUmVsaXN0ZWRcIjogICAgICAgICAgICAgIHsgdHlwZTogXCJib29sZWFuXCIsIHhtbDogXCJCdXlTZWxsLlJlbGlzdGVkXCIsIGRlZmF1bHRWYWx1ZTogZmFsc2UgfSxcbiAgICBcImJlc3RPZmZlckNvdW50XCI6ICAgICAgICAgIHsgdHlwZTogXCJudW1iZXJcIiwgeG1sOiBcIkJ1eVNlbGwuQmVzdE9mZmVyRGV0YWlscy5CZXN0T2ZmZXJDb3VudFwiIH0sXG4gICAgXCJnYWxsZXJ5VXJsXCI6ICAgICAgICAgICAgICB7IHR5cGU6IFwic3RyaW5nXCIsIHhtbDogXCJCdXlTZWxsLlBpY3R1cmVEZXRhaWxzLkdhbGxlcnlVUkxcIiB9LFxuICAgIFwic2hpcHBpbmdDb3N0XCI6ICAgICAgICAgICAgeyB0eXBlOiBcIm51bWJlclwiLCB4bWw6IFwiQnV5U2VsbC5TaGlwcGluZ0RldGFpbHMuU2hpcHBpbmdTZXJ2aWNlT3B0aW9ucy5TaGlwcGluZ1NlcnZpY2VDb3N0XCIgfSxcbiAgICBcInNoaXBwaW5nQ29zdEN1cnJlbmN5XCI6ICAgIHsgdHlwZTogXCJzdHJpbmdcIiwgeG1sOiBcIkJ1eVNlbGwuU2hpcHBpbmdEZXRhaWxzLlNoaXBwaW5nU2VydmljZU9wdGlvbnMuU2hpcHBpbmdTZXJ2aWNlQ29zdC5AY3VycmVuY3lJRFwiIH0sXG4gICAgXCJpc0xvY2FsUGlja3VwXCI6ICAgICAgICAgICB7IHR5cGU6IFwiYm9vbGVhblwiLCB4bWw6IFwiQnV5U2VsbC5TaGlwcGluZ0RldGFpbHMuU2hpcHBpbmdTZXJ2aWNlT3B0aW9ucy5Mb2NhbFBpY2t1cFwiLCBkZWZhdWx0VmFsdWU6IGZhbHNlIH0sXG4gICAgXCJiZXN0T2ZmZXJcIiA6ICAgICAgICAgICAgICB7IHR5cGU6IFwibnVtYmVyXCIsIHhtbDogXCJCdXlTZWxsLkJlc3RPZmZlckRldGFpbHMuQmVzdE9mZmVyXCIsIGRlZmF1bHRWYWx1ZSA6IFwiMFwiIH0sXG4gICAgXCJiZXN0T2ZmZXJDdXJyZW5jeVwiIDogICAgICB7IHR5cGU6IFwic3RyaW5nXCIsIHhtbDogXCJCdXlTZWxsLkJlc3RPZmZlckRldGFpbHMuQmVzdE9mZmVyLkBjdXJyZW5jeUlEXCIgfSxcbiAgICBcImJlc3RPZmZlclN0YXR1c1wiIDogICAgICAgIHsgdHlwZTogXCJzdHJpbmdcIiwgeG1sOiBcIkJ1eVNlbGwuQmVzdE9mZmVyRGV0YWlscy5CZXN0T2ZmZXJTdGF0dXNcIiB9LFxuICAgIFwiY29udmVydGVkQmVzdE9mZmVyXCIgOiAgICAgeyB0eXBlOiBcIm51bWJlclwiLCB4bWw6IFwiQnV5U2VsbC5CZXN0T2ZmZXJEZXRhaWxzLkNvbnZlcnRlZEJlc3RPZmZlclwiLCBkZWZhdWx0VmFsdWU6IFwiMFwiIH0sXG4gICAgXCJjb252ZXJ0ZWRCZXN0T2ZmZXJDdXJyZW5jeVwiIDogeyB0eXBlOiBcInN0cmluZ1wiLCB4bWw6IFwiQnV5U2VsbC5CZXN0T2ZmZXJEZXRhaWxzLkNvbnZlcnRlZEJlc3RPZmZlci5AY3VycmVuY3lJRFwiIH0sXG4gICAgLy8gTWFudWFsbHkgc2V0IGZpZWxkc1xuICAgIFwiaXNFbmRlZFwiOiAgICAgICAgICAgICAgICAgeyB0eXBlOiBcImJvb2xlYW5cIiwgeG1sOiBcIlwiIH0sXG4gICAgXCJxdWFudGl0eVJlbWFpbmluZ1wiOiAgICAgICB7IHR5cGU6IFwibnVtYmVyXCIsIHhtbDogXCJcIiB9LFxuICAgIFwidHlwZVwiOiAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiBcInN0cmluZ1wiLCB4bWw6IFwiXCIgfSxcbiAgICBcInRyYW5zYWN0aW9uc1wiOiAgICAgICAgICAgIHsgdHlwZTogXCJvYmplY3RcIiwgeG1sOiBcIlwiIH0sXG4gICAgXCJzb3VuZFwiOiAgICAgICAgICAgICAgICAgICB7IHR5cGU6IFwic3RyaW5nXCIsIHhtbDogXCJcIiB9XG4gIH1cbn07XG5cbkl0ZW0uWE1MX1BSRUZJWEVTID0ge1xuICBCVVlTRUxMIDogXCJCdXlTZWxsXCIsXG4gIE1VTFRJUExFIDogXCJNdWx0aXBsZVwiLFxuICBTSElQUElORyA6IFwiU2hpcHBpbmdcIlxufTtcblxuLyogSXRlbSB0eXBlcyAqL1xuSXRlbS5UWVBFUyA9IHtcbiAgV0FUQ0hJTkcgOiBcIldhdGNoaW5nXCIsXG4gIEJJRERJTkcgOiBcIkJpZGRpbmdcIixcbiAgV09OIDogXCJXb25cIixcbiAgTE9TVCA6IFwiTG9zdFwiLFxuICBTRUxMSU5HX09GRkVSIDogXCJTZWxsaW5nT2ZmZXJcIixcbiAgU0VMTElORyA6IFwiU2VsbGluZ1wiLFxuICBTQ0hFRFVMRUQgOiBcIlNjaGVkdWxlZFwiLFxuICBTT0xEIDogXCJTb2xkXCIsXG4gIFVOU09MRCA6IFwiVW5zb2xkXCIsXG4gIEJFU1RfT0ZGRVIgOiBcIkJlc3RPZmZlclwiXG59O1xuXG4vKiBJdGVtIHN0YXRlcy4gKi9cbkl0ZW0uU1RBVEVTID0ge1xuICBXQVRDSElORyA6IDEwMCxcbiAgV0FUQ0hJTkdfQ0xBU1NJRklFRF9BRCA6IDEwMSxcbiAgQlVZSU5HIDogMjAwLFxuICBCVVlJTkdfU1VDQ0VTU19SRVNFUlZFX05PVF9NRVQgOiAyMDEsXG4gIEJVWUlOR19PVVRCSURfUkVTRVJWRV9OT1RfTUVUIDogMjAyLFxuICBCVVlJTkdfU1VDQ0VTUyA6IDIwMyxcbiAgQlVZSU5HX09VVEJJRCA6IDIwNCxcbiAgQlVZSU5HX0lURU1fV09OX05PVF9QQUlEIDogMjA1LFxuICBCVVlJTkdfSVRFTV9XT05fUEFJRCA6IDIwNixcbiAgQlVZSU5HX0lURU1fV09OX1NISVBQRUQgOiAyMDcsXG4gIEJVWUlOR19JVEVNX1dPTl9TSElQUEVEX0ZFRURCQUNLX0xFRlQgOiAyMDgsXG4gIEJVWUlOR19JVEVNX0xPU1QgOiAyMDksXG4gIFNFTExJTkcgOiAzMDAsXG4gIFNFTExJTkdfUkVTRVJWRV9OT1RfTUVUIDogMzAxLFxuICBTRUxMSU5HX1dJVEhfT0ZGRVJTIDogMzAyLFxuICBTRUxMSU5HX0lURU1fU09MRCA6IDMwMyxcbiAgU0VMTElOR19JVEVNX1NPTERfUEFJRF9BTkRfU0hJUCA6IDMwNCxcbiAgU0VMTElOR19JVEVNX1NPTERfUkVGVU5ERUQgOiAzMDUsXG4gIFNFTExJTkdfSVRFTV9TT0xEX05PVF9QQUlEIDogMzA2LFxuICBTRUxMSU5HX0lURU1fU09MRF9TSElQUEVEIDogMzA3LFxuICBTRUxMSU5HX0lURU1fU09MRF9GRUVEQkFDS19SRUNFSVZFRCA6IDMwOCxcbiAgU0VMTElOR19JVEVNX1VOU09MRCA6IDMxMCxcbiAgU0VMTElOR19JVEVNX1VOU09MRF9SRUxJU1RFRCA6IDMxMSxcbiAgU0VMTElOR19TQ0hFRFVMRUQgOiAzMTIsXG4gIEJFU1RfT0ZGRVJfUEVORElORyA6IDQwMSxcbiAgQkVTVF9PRkZFUl9ERUNMSU5FRCA6IDQwMixcbiAgQkVTVF9PRkZFUl9FWFBJUkVEIDogNDAzLFxuICBCRVNUX09GRkVSX0NPVU5URVJFRCA6IDQwNCxcbn07XG5cbkl0ZW0uTElTVElOR19GT1JNQVRTID0ge1xuICBDSElORVNFIDogXCJDaGluZXNlXCIsXG4gIERVVENIIDogXCJEdXRjaFwiLFxuICBMSVZFIDogXCJMaXZlXCIsXG4gIEZJWEVEIDogXCJGaXhlZFByaWNlSXRlbVwiLFxuICBTVE9SRV9GSVhFRCA6IFwiU3RvcmVzRml4ZWRQcmljZVwiLFxuICBDTEFTU0lGSUVEIDogXCJBZFR5cGVcIixcbiAgTEVBRF9HRU5FUkFUSU9OIDogXCJMZWFkR2VuZXJhdGlvblwiXG59O1xuXG5JdGVtLlNISVBQSU5HID0ge1xuICBTSElQUElOR19UWVBFX0NBTENVTEFURUQgOiBcIkNhbGN1bGF0ZWRcIixcbiAgU0hJUFBJTkdfVFlQRV9DQUxDVUxBVEVEX0RPTUVTVElDIDogXCJDYWxjdWxhdGVkRG9tZXN0aWNGbGF0SW50ZXJuYXRpb25hbFwiLFxuICBTSElQUElOR19UWVBFX0ZMQVQgOiBcIkZsYXRcIixcbiAgU0hJUFBJTkdfVFlQRV9GTEFUX0RPTUVTVElDOiBcIkZsYXREb21lc3RpY0NhbGN1bGF0ZWRJbnRlcm5hdGlvbmFsXCIsXG4gIFNISVBQSU5HX1RZUEVfRlJFRSA6IFwiRnJlZVwiLFxuICBTSElQUElOR19UWVBFX0ZSRUlHSFQgOiBcIkZyZWlnaHRcIixcbiAgU0hJUFBJTkdfVFlQRV9GUkVJR0hUX0ZMQVQgOiBcIkZyZWlnaHRGbGF0XCIsXG4gIFNISVBQSU5HX1RZUEVfVU5TUEVDSUZJRUQgOiBcIk5vdFNwZWNpZmllZFwiXG59O1xuXG5JdGVtLnByb3RvdHlwZSA9IHtcbiAgLyoqXG4gICAqIFVzZWQgdG8gZGV0ZXJtaW5lIHRoZSB0eXBlIG9mIHRoZSBvYmplY3RcbiAgICovXG4gIG5hbWUgOiBJdGVtLlNDSEVNQS5OQU1FLFxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgb2JqZWN0LlxuICAgKiBAcGFyYW0gYUl0ZW1JZCB0aGUgaXRlbSBpZC5cbiAgICovXG4gIF9pbml0IDogZnVuY3Rpb24oYUl0ZW1JZCkge1xuICAgIHRoaXMuc2V0KFwiaXRlbUlkXCIsIGFJdGVtSWQpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gcHJvcGVydHkuXG4gICAqIEBwYXJhbSBhUHJvcGVydHkgdGhlIHByb3BlcnR5IG5hbWUuXG4gICAqIEByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlLlxuICAgKi9cbiAgZ2V0IDogZnVuY3Rpb24oYVByb3BlcnR5KSB7XG4gICAgcmV0dXJuIHRoaXNbXCJfXCIgKyBhUHJvcGVydHldO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBnaXZlbiBwcm9wZXJ0eSB0byB0aGUgZ2l2ZW4gdmFsdWUsIGNoZWNraW5nIHRoYXQgdGhlIHZhbHVlIGlzIG9mXG4gICAqIHRoZSBjb3JyZWN0IHR5cGUgZm9yIHRoZSBwcm9wZXJ0eVxuICAgKiBAcGFyYW0gYVByb3BlcnR5IHRoZSBwcm9wZXJ0eSBuYW1lLlxuICAgKiBAcGFyYW0gYVZhbHVlIHRoZSBwcm9wZXJ0eSB2YWx1ZS5cbiAgICovXG4gIHNldCA6IGZ1bmN0aW9uKGFQcm9wZXJ0eSwgYVZhbHVlKSB7XG4gICAgdmFyIHR5cGUgPSBJdGVtLlNDSEVNQS5QUk9QRVJUSUVTW2FQcm9wZXJ0eV0udHlwZTtcblxuICAgIHRoaXNbXCJfXCIgKyBhUHJvcGVydHldID0gT2JqZWN0SGVscGVyLmdldFR5cGVkVmFsdWUodHlwZSwgYVZhbHVlKTtcbiAgfSxcblxuICBpc0VuZGVkIDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRpbWVMZWZ0ID0gdGhpcy5nZXQoXCJ0aW1lTGVmdFwiKTtcbiAgICB2YXIgaXNFbmRlZDtcbiAgICAvLyBYWFg6IHdlIGNoZWNrIHRoZSB0aW1lIGxlZnQgaXMgbm90IG51bGwgYmVjYXVzZSBpbiBzb21lIHJhbmRvbSBjYXNlc1xuICAgIC8vIHRoZSBBUEkgZG9lcyBub3QgcmV0dXJuIHRoaXMgaW5mbywgYW5kIHRoaXMgY2F1c2VzIGVycm9ycyB3aGVuXG4gICAgLy8gZmlsdGVyaW5nIHRoZSBsaXN0IGFuZCBnZXR0aW5nIGl0ZW0gaW5mb1xuICAgIGlzRW5kZWQgPSAodGltZUxlZnQgIT09IG51bGwgJiYgKHRpbWVMZWZ0Lmxlbmd0aCA9PT0gMCB8fCB0aW1lTGVmdCA9PSBcIlBUMFNcIikpO1xuXG4gICAgaWYgKCFpc0VuZGVkKSB7XG4gICAgICB2YXIgZW5kVGltZSA9IHRoaXMuZ2V0KFwiZW5kVGltZVwiKTtcbiAgICAgIHZhciBlYmF5VGltZSA9IENvbW1vblNlcnZpY2UuZ2V0ZUJheVRpbWUoKS5nZXRUaW1lKCk7XG4gICAgICBpc0VuZGVkID0gKE1hdGgubWF4KDAsIGVuZFRpbWUgLSBlYmF5VGltZSkgPT09IDApO1xuICAgIH1cblxuICAgIHJldHVybiBpc0VuZGVkO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBjdXJyZW50IGl0ZW0gdG8gdGhlIG5ldyBpdGVtIHBhc3NlZC5cbiAgICogQHJldHVybiB0aGUgbW9kaWZpZWQgZmllbGRzLCBpZiBhbnkuXG4gICAqL1xuICB1cGRhdGVUbyA6IGZ1bmN0aW9uKGFOZXdPYmplY3QpIHtcbiAgICByZXR1cm4gT2JqZWN0SGVscGVyLnVwZGF0ZVRvKHRoaXMsIGFOZXdPYmplY3QsIEl0ZW0uU0NIRU1BKTtcbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgY3VycmVudCBpdGVtIHdpdGggYSBKU09OIHBhc3NlZC5cbiAgICovXG4gIHVwZGF0ZVdpdGhKU09OIDogZnVuY3Rpb24oYUpTT04pIHtcbiAgICBPYmplY3RIZWxwZXIudXBkYXRlV2l0aEpTT04odGhpcywgYUpTT04sIEl0ZW0uU0NIRU1BKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgaXRlbSBjdXJyZW5jdCBzdGF0ZS5cbiAgICogQHBhcmFtIGFVc2VySWQgdGhlIGN1cnJlbnQgYWN0aXZlIHVzZXIgaWQuXG4gICAqIEByZXR1cm4gdGhlIGl0ZW0gY3VycmVudCBzdGF0ZS5cbiAgICovXG4gIGdldEN1cnJlbnRTdGF0ZSA6IGZ1bmN0aW9uKGFVc2VySWQpIHtcbiAgICB2YXIgc3RhdGUgPSBudWxsO1xuICAgIHZhciB0cmFuc2FjdGlvbnM7XG4gICAgdmFyIHRyYW5zYWN0aW9uO1xuXG4gICAgc3dpdGNoICh0aGlzLmdldChcInR5cGVcIikpIHtcbiAgICAgIGNhc2UgSXRlbS5UWVBFUy5XQVRDSElORzpcbiAgICAgICAgdmFyIGxpc3RpbmdGb3JtYXQgPSB0aGlzLmdldChcImxpc3RpbmdGb3JtYXRcIik7XG5cbiAgICAgICAgaWYgKEl0ZW0uTElTVElOR19GT1JNQVRTLkNMQVNTSUZJRUQgPT0gbGlzdGluZ0Zvcm1hdCB8fFxuICAgICAgICAgICAgSXRlbS5MSVNUSU5HX0ZPUk1BVFMuTEVBRF9HRU5FUkFUSU9OID09IGxpc3RpbmdGb3JtYXQpIHtcbiAgICAgICAgICBzdGF0ZSA9IEl0ZW0uU1RBVEVTLldBVENISU5HX0NMQVNTSUZJRURfQUQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhdGUgPSBJdGVtLlNUQVRFUy5XQVRDSElORztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgSXRlbS5UWVBFUy5CSURESU5HOlxuICAgICAgICB2YXIgaXNSZXNlcnZlTWV0ID0gdGhpcy5nZXQoXCJpc1Jlc2VydmVNZXRcIik7XG5cbiAgICAgICAgaWYgKHRoaXMuZ2V0KFwiaGlnaEJpZGRlcklkXCIpLnRvTG93ZXJDYXNlKCkgPT0gYVVzZXJJZC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgaWYgKGlzUmVzZXJ2ZU1ldCkge1xuICAgICAgICAgICAgc3RhdGUgPSBJdGVtLlNUQVRFUy5CVVlJTkdfU1VDQ0VTUztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhdGUgPSBJdGVtLlNUQVRFUy5CVVlJTkdfU1VDQ0VTU19SRVNFUlZFX05PVF9NRVQ7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChpc1Jlc2VydmVNZXQpIHtcbiAgICAgICAgICAgIHN0YXRlID0gSXRlbS5TVEFURVMuQlVZSU5HX09VVEJJRDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhdGUgPSBJdGVtLlNUQVRFUy5CVVlJTkdfT1VUQklEX1JFU0VSVkVfTk9UX01FVDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEl0ZW0uVFlQRVMuV09OOlxuICAgICAgICB0cmFuc2FjdGlvbnMgPSB0aGlzLmdldChcInRyYW5zYWN0aW9uc1wiKTtcbiAgICAgICAgc3RhdGUgPSBJdGVtLlNUQVRFUy5CVVlJTkdfSVRFTV9XT047XG5cbiAgICAgICAgaWYgKHRyYW5zYWN0aW9ucyAmJiB0cmFuc2FjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRyYW5zYWN0aW9uID0gdHJhbnNhY3Rpb25zWzBdO1xuXG4gICAgICAgICAgaWYgKHRyYW5zYWN0aW9uLmdldChcImlzU2hpcHBlZFwiKSkge1xuICAgICAgICAgICAgaWYgKHRyYW5zYWN0aW9uLmdldChcImZlZWRiYWNrTGVmdFR5cGVcIikpIHtcbiAgICAgICAgICAgICAgc3RhdGUgPSBJdGVtLlNUQVRFUy5CVVlJTkdfSVRFTV9XT05fU0hJUFBFRF9GRUVEQkFDS19MRUZUO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc3RhdGUgPSBJdGVtLlNUQVRFUy5CVVlJTkdfSVRFTV9XT05fU0hJUFBFRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKCF0cmFuc2FjdGlvbi5nZXQoXCJpc1BhaWRGb3JcIikpIHtcbiAgICAgICAgICAgIHN0YXRlID0gSXRlbS5TVEFURVMuQlVZSU5HX0lURU1fV09OX05PVF9QQUlEO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHJhbnNhY3Rpb24uZ2V0KFwiaXNQYWlkRm9yXCIpKSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEl0ZW0uU1RBVEVTLkJVWUlOR19JVEVNX1dPTl9QQUlEO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgSXRlbS5UWVBFUy5MT1NUOlxuICAgICAgICBzdGF0ZSA9IEl0ZW0uU1RBVEVTLkJVWUlOR19JVEVNX0xPU1Q7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBJdGVtLlRZUEVTLlNFTExJTkdfT0ZGRVI6XG4gICAgICBjYXNlIEl0ZW0uVFlQRVMuU0VMTElORzpcbiAgICAgICAgdmFyIG51bUJpZHMgPSB0aGlzLmdldChcIm51bUJpZHNcIik7XG4gICAgICAgIGlmIChudW1CaWRzICYmIG51bUJpZHMgPiAwICYmICF0aGlzLmdldChcImlzUmVzZXJ2ZU1ldFwiKSkge1xuICAgICAgICAgIHN0YXRlID0gSXRlbS5TVEFURVMuU0VMTElOR19SRVNFUlZFX05PVF9NRVQ7XG4gICAgICAgIH0gZWxzZSBpZiAobnVtQmlkcyAmJiBudW1CaWRzID4gMCkge1xuICAgICAgICAgIHN0YXRlID0gSXRlbS5TVEFURVMuU0VMTElOR19JVEVNX1NPTEQ7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5nZXQoXCJiZXN0T2ZmZXJDb3VudFwiKSAmJiB0aGlzLmdldChcImJlc3RPZmZlckNvdW50XCIpID4gMCkge1xuICAgICAgICAgIHN0YXRlID0gSXRlbS5TVEFURVMuU0VMTElOR19XSVRIX09GRkVSUztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdGF0ZSA9IEl0ZW0uU1RBVEVTLlNFTExJTkc7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEl0ZW0uVFlQRVMuU09MRDpcbiAgICAgICAgdHJhbnNhY3Rpb25zID0gdGhpcy5nZXQoXCJ0cmFuc2FjdGlvbnNcIik7XG4gICAgICAgIHN0YXRlID0gSXRlbS5TVEFURVMuU0VMTElOR19JVEVNX1NPTEQ7XG5cbiAgICAgICAgaWYgKHRyYW5zYWN0aW9ucyAmJiB0cmFuc2FjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRyYW5zYWN0aW9uID0gdHJhbnNhY3Rpb25zWzBdO1xuXG4gICAgICAgICAgaWYgKHRyYW5zYWN0aW9uLmdldChcImlzUmVmdW5kZWRcIikpIHtcbiAgICAgICAgICAgIHN0YXRlID0gSXRlbS5TVEFURVMuU0VMTElOR19JVEVNX1NPTERfUkVGVU5ERUQ7XG4gICAgICAgICAgfSBlbHNlIGlmICh0cmFuc2FjdGlvbi5nZXQoXCJpc1NoaXBwZWRcIikpIHtcbiAgICAgICAgICAgIHN0YXRlID0gSXRlbS5TVEFURVMuU0VMTElOR19JVEVNX1NPTERfU0hJUFBFRDtcbiAgICAgICAgICAgIGlmICh0cmFuc2FjdGlvbi5nZXQoXCJmZWVkYmFja1JlY2VpdmVkVHlwZVwiKSkge1xuICAgICAgICAgICAgICBzdGF0ZSA9IEl0ZW0uU1RBVEVTLlNFTExJTkdfSVRFTV9TT0xEX0ZFRURCQUNLX1JFQ0VJVkVEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAodHJhbnNhY3Rpb24uZ2V0KFwiaXNQYWlkRm9yXCIpKSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEl0ZW0uU1RBVEVTLlNFTExJTkdfSVRFTV9TT0xEX1BBSURfQU5EX1NISVA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0YXRlID0gSXRlbS5TVEFURVMuU0VMTElOR19JVEVNX1NPTERfTk9UX1BBSUQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBJdGVtLlRZUEVTLlVOU09MRDpcbiAgICAgICAgaWYgKHRoaXMuZ2V0KFwiaXNSZWxpc3RlZFwiKSkge1xuICAgICAgICAgIHN0YXRlID0gSXRlbS5TVEFURVMuU0VMTElOR19JVEVNX1VOU09MRF9SRUxJU1RFRDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdGF0ZSA9IEl0ZW0uU1RBVEVTLlNFTExJTkdfSVRFTV9VTlNPTEQ7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEl0ZW0uVFlQRVMuU0NIRURVTEVEOlxuICAgICAgICAgIHN0YXRlID0gSXRlbS5TVEFURVMuU0VMTElOR19TQ0hFRFVMRUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBJdGVtLlRZUEVTLkJFU1RfT0ZGRVI6XG4gICAgICAgIGlmICh0aGlzLmdldChcImJlc3RPZmZlclN0YXR1c1wiKS50b0xvd2VyQ2FzZSgpID09IFwicGVuZGluZ1wiKSB7XG4gICAgICAgICAgc3RhdGUgPSBJdGVtLlNUQVRFUy5CRVNUX09GRkVSX1BFTkRJTkc7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5nZXQoXCJiZXN0T2ZmZXJTdGF0dXNcIikudG9Mb3dlckNhc2UoKSA9PSBcImRlY2xpbmVkXCIpIHtcbiAgICAgICAgICBzdGF0ZSA9IEl0ZW0uU1RBVEVTLkJFU1RfT0ZGRVJfREVDTElORUQ7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5nZXQoXCJiZXN0T2ZmZXJTdGF0dXNcIikudG9Mb3dlckNhc2UoKSA9PSBcImV4cGlyZWRcIikge1xuICAgICAgICAgIHN0YXRlID0gSXRlbS5TVEFURVMuQkVTVF9PRkZFUl9FWFBJUkVEO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0KFwiYmVzdE9mZmVyU3RhdHVzXCIpLnRvTG93ZXJDYXNlKCkgPT0gXCJjb3VudGVyZWRcIikge1xuICAgICAgICAgIHN0YXRlID0gSXRlbS5TVEFURVMuQkVTVF9PRkZFUl9DT1VOVEVSRUQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhdGUgPSBJdGVtLlNUQVRFUy5XQVRDSElORztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdGU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBvcHVsYXRlcyB0aGUgY3VycmVudCBpdGVtIGZyb20gdGhlIHBhc3NlZCBYTUxcbiAgICogQHBhcmFtIGFYbWxOb2RlIHRoZSB4bWwgbm9kZSBmb3IgdGhlIGl0ZW0uXG4gICAqIEBwYXJhbSBhRXhjbHVzaXZlUHJlZml4IHRoZSB4bWwgcHJlZml4LlxuICAgKi9cbiAgZnJvbVhNTCA6IGZ1bmN0aW9uKGFYbWxOb2RlLCBhRXhjbHVzaXZlUHJlZml4KSB7XG4gICAgdmFyIGl0ZW0gPSBPYmplY3RIZWxwZXIuZnJvbVhNTChhWG1sTm9kZSwgSXRlbSwgYUV4Y2x1c2l2ZVByZWZpeCk7XG4gICAgdGhpcy51cGRhdGVUbyhpdGVtKTtcblxuICAgIC8vIGlzRW5kZWRcbiAgICB0aGlzLnNldChcImlzRW5kZWRcIiwgKHRoaXMuZ2V0KFwidGltZUxlZnRcIikgPT0gXCJQVDBTXCIpKTtcblxuICAgIC8vIHF1YW50aXR5UmVtYWluaW5nXG4gICAgdGhpcy5zZXQoXCJxdWFudGl0eVJlbWFpbmluZ1wiLCB0aGlzLmdldChcInF1YW50aXR5XCIpIC0gdGhpcy5nZXQoXCJxdWFudGl0eVNvbGRcIikpO1xuXG4gICAgLy8gc3RhcnRUaW1lIGFuZCBlbmRUaW1lXG4gICAgaWYgKHRoaXMuZ2V0KFwic3RhcnRUaW1lXCIpKSB7XG4gICAgICB0aGlzLnNldChcInN0YXJ0VGltZVwiLCBVdGlsaXR5SGVscGVyLmRhdGVGcm9tSXNvODYwMSh0aGlzLmdldChcInN0YXJ0VGltZVwiKSkuZ2V0VGltZSgpKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZ2V0KFwiZW5kVGltZVwiKSkge1xuICAgICAgdGhpcy5zZXQoXCJlbmRUaW1lXCIsIFV0aWxpdHlIZWxwZXIuZGF0ZUZyb21Jc284NjAxKHRoaXMuZ2V0KFwiZW5kVGltZVwiKSkuZ2V0VGltZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuZ2V0KFwidGltZUxlZnRcIikpIHtcbiAgICAgICAgdmFyIGVuZFRpbWUgPSBDb21tb25TZXJ2aWNlLmdldGVCYXlUaW1lKCkuZ2V0VGltZSgpICtcbiAgICAgICAgICBVdGlsaXR5SGVscGVyLmlzbzg2MDFEdXJhdGlvblRvTWlsbGlzZWNvbmRzKHRoaXMuZ2V0KFwidGltZUxlZnRcIikpO1xuICAgICAgICBpZiAoZW5kVGltZSAmJiAwIDwgZW5kVGltZSkge1xuICAgICAgICAgIHRoaXMuc2V0KFwiZW5kVGltZVwiLCBlbmRUaW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2V0KFwiYnV5SXROb3dQcmljZVwiLCB0aGlzLmdldChcImN1cnJlbnRQcmljZVwiKSk7XG4gIH1cbn07XG4iXX0=