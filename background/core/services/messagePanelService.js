/*!
 * Copyright (C) 2007-2015 eBay Inc. All Rights Reserved.
 */
var MessagePanelService = {
    TYPE: {
        LEAVE_FEEDBACK: 1,
        BETA_APP_UPDATED: 2,
        ITEMS_DELETED: 3,
        CONNECT_ERROR: 4
    },
    _messages: [],
    _init: function () {
        if (PropertyDAO.get(PropertyDAO.PROP_APP_JUST_UPDATED)) {
        }
    },
    getMessages: function () {
        return this._messages;
    },
    addMessage: function (aType, aData) {
        var len = this._messages.length;
        var hasMessage = false;
        if (len > 0) {
            for (var i = 0; i < len; i++) {
                if (this._messages[i].type == aType) {
                    hasMessage = true;
                    break;
                }
            }
        }
        if (!hasMessage) {
            if (aType == this.TYPE.ITEMS_DELETED) {
                this._messages.unshift({ type: aType, data: aData });
            }
            else {
                this._messages.push({ type: aType, data: aData });
            }
            ObserverHelper.notify(Topics.MESSAGE_PANEL_SHOW, aType);
        }
    },
    dismissMessage: function (aType) {
        if (aType == this.TYPE.BETA_APP_UPDATED) {
            PropertyDAO.set(PropertyDAO.PROP_APP_JUST_UPDATED, false);
        }
        var len = this._messages.length;
        if (len > 0) {
            for (var i = (len - 1); i >= 0; i--) {
                if (this._messages[i].type == aType) {
                    this._messages.splice(i, 1);
                }
            }
        }
        ObserverHelper.notify(Topics.MESSAGE_PANEL_DISMISS, aType);
    }
};
(function () { this._init(); }).apply(MessagePanelService);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZVBhbmVsU2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2JhY2tncm91bmQvY29yZS9zZXJ2aWNlcy9tZXNzYWdlUGFuZWxTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztHQUVHO0FBU0gsSUFBSSxtQkFBbUIsR0FBRztJQUN4QixJQUFJLEVBQUU7UUFDSixjQUFjLEVBQUcsQ0FBQztRQUNsQixnQkFBZ0IsRUFBRyxDQUFDO1FBQ3BCLGFBQWEsRUFBRyxDQUFDO1FBQ2pCLGFBQWEsRUFBRyxDQUFDO0tBQ2xCO0lBQ0QsU0FBUyxFQUFHLEVBQUU7SUFFZCxLQUFLLEVBQUc7UUFFTixFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUd6RCxDQUFDO0lBQ0gsQ0FBQztJQUVELFdBQVcsRUFBRztRQUVaLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxVQUFVLEVBQUcsVUFBUyxLQUFLLEVBQUUsS0FBSztRQUVoQyxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQztRQUNoQyxJQUFJLFVBQVUsR0FBRyxLQUFLLENBQUM7UUFFdkIsRUFBRSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDWixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUM3QixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDO29CQUNwQyxVQUFVLEdBQUcsSUFBSSxDQUFDO29CQUNsQixLQUFLLENBQUM7Z0JBQ1IsQ0FBQztZQUNILENBQUM7UUFDSCxDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQ2hCLEVBQUUsQ0FBQyxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7Z0JBQ3JDLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztZQUN2RCxDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ04sSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO1lBQ3BELENBQUM7WUFDRCxjQUFjLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUMxRCxDQUFDO0lBQ0gsQ0FBQztJQUVELGNBQWMsRUFBRyxVQUFTLEtBQUs7UUFFN0IsRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO1lBQ3hDLFdBQVcsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLHFCQUFxQixFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQzVELENBQUM7UUFFRCxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQztRQUNoQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNaLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFDcEMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQztvQkFDcEMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUM5QixDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUM7UUFDRCxjQUFjLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUM3RCxDQUFDO0NBQ0YsQ0FBQztBQUtGLENBQUMsY0FBYSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChDKSAyMDA3LTIwMTUgZUJheSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKi9cblxuLypcbiAgdmFyIExvZ2dlciA9IHJlcXVpcmUoXCJoZWxwZXJzL2xvZ2dlclwiKS5Mb2dnZXI7XG4gIHZhciBUb3BpY3MgPSByZXF1aXJlKFwiaGVscGVycy9vYnNlcnZlckhlbHBlclwiKS5Ub3BpY3M7XG4gIHZhciBPYnNlcnZlckhlbHBlciA9IHJlcXVpcmUoXCJoZWxwZXJzL29ic2VydmVySGVscGVyXCIpLk9ic2VydmVySGVscGVyO1xuICB2YXIgUHJvcGVydHlEQU8gPSByZXF1aXJlKFwic3RvcmFnZS9wcm9wZXJ0eURBT1wiKS5Qcm9wZXJ0eURBTztcbiovXG5cbnZhciBNZXNzYWdlUGFuZWxTZXJ2aWNlID0ge1xuICBUWVBFOiB7XG4gICAgTEVBVkVfRkVFREJBQ0sgOiAxLFxuICAgIEJFVEFfQVBQX1VQREFURUQgOiAyLFxuICAgIElURU1TX0RFTEVURUQgOiAzLCAvLyBVSSBsZXZlbFxuICAgIENPTk5FQ1RfRVJST1IgOiA0XG4gIH0sXG4gIF9tZXNzYWdlcyA6IFtdLFxuXG4gIF9pbml0IDogZnVuY3Rpb24oKSB7XG4gICAgXG4gICAgaWYgKFByb3BlcnR5REFPLmdldChQcm9wZXJ0eURBTy5QUk9QX0FQUF9KVVNUX1VQREFURUQpKSB7XG4gICAgICAvLyBYWFg6IENvbW1lbnQgb3V0IHVudGlsIHdlIGdldCB0aGUgbGlua1xuICAgICAgLy8gdGhpcy5hZGRNZXNzYWdlKHRoaXMuVFlQRS5CRVRBX0FQUF9VUERBVEVEKTtcbiAgICB9XG4gIH0sXG5cbiAgZ2V0TWVzc2FnZXMgOiBmdW5jdGlvbigpIHtcbiAgICBcbiAgICByZXR1cm4gdGhpcy5fbWVzc2FnZXM7XG4gIH0sXG5cbiAgYWRkTWVzc2FnZSA6IGZ1bmN0aW9uKGFUeXBlLCBhRGF0YSkge1xuICAgIFxuICAgIHZhciBsZW4gPSB0aGlzLl9tZXNzYWdlcy5sZW5ndGg7XG4gICAgdmFyIGhhc01lc3NhZ2UgPSBmYWxzZTtcblxuICAgIGlmIChsZW4gPiAwKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmICh0aGlzLl9tZXNzYWdlc1tpXS50eXBlID09IGFUeXBlKSB7XG4gICAgICAgICAgaGFzTWVzc2FnZSA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWhhc01lc3NhZ2UpIHtcbiAgICAgIGlmIChhVHlwZSA9PSB0aGlzLlRZUEUuSVRFTVNfREVMRVRFRCkge1xuICAgICAgICB0aGlzLl9tZXNzYWdlcy51bnNoaWZ0KHsgdHlwZTogYVR5cGUsIGRhdGE6IGFEYXRhIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fbWVzc2FnZXMucHVzaCh7IHR5cGU6IGFUeXBlLCBkYXRhOiBhRGF0YSB9KTtcbiAgICAgIH1cbiAgICAgIE9ic2VydmVySGVscGVyLm5vdGlmeShUb3BpY3MuTUVTU0FHRV9QQU5FTF9TSE9XLCBhVHlwZSk7XG4gICAgfVxuICB9LFxuXG4gIGRpc21pc3NNZXNzYWdlIDogZnVuY3Rpb24oYVR5cGUpIHtcbiAgICBcbiAgICBpZiAoYVR5cGUgPT0gdGhpcy5UWVBFLkJFVEFfQVBQX1VQREFURUQpIHtcbiAgICAgIFByb3BlcnR5REFPLnNldChQcm9wZXJ0eURBTy5QUk9QX0FQUF9KVVNUX1VQREFURUQsIGZhbHNlKTtcbiAgICB9XG5cbiAgICB2YXIgbGVuID0gdGhpcy5fbWVzc2FnZXMubGVuZ3RoO1xuICAgIGlmIChsZW4gPiAwKSB7XG4gICAgICBmb3IgKHZhciBpID0gKGxlbiAtIDEpOyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAodGhpcy5fbWVzc2FnZXNbaV0udHlwZSA9PSBhVHlwZSkge1xuICAgICAgICAgIHRoaXMuX21lc3NhZ2VzLnNwbGljZShpLCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBPYnNlcnZlckhlbHBlci5ub3RpZnkoVG9waWNzLk1FU1NBR0VfUEFORUxfRElTTUlTUywgYVR5cGUpO1xuICB9XG59O1xuXG4vKipcbiAqIENvbnN0cnVjdG9yLlxuICovXG4oZnVuY3Rpb24oKSB7IHRoaXMuX2luaXQoKTsgfSkuYXBwbHkoTWVzc2FnZVBhbmVsU2VydmljZSk7XG4iXX0=